import{c as He,r as z,a as g,w as te,b7 as Yt,d as c,g as Oe,bb as Qt,bj as Vt,f as pt,k as bt,br as Ut,b5 as Wt,aL as ke,x as We,bs as Kt,s as Qe,Q as A,Y as Jt,u as Gt,aE as Xt,j as Zt,aA as ea,m as ta,aF as aa,n as oa,aG as na,o as Ve,a4 as rt,$ as it,a6 as la,a5 as wt,a2 as ra,ax as kt,a1 as st,S as Ue,bt as ia,q as Ct,aN as sa,D as ua,J as be,O as De,M as F,P as Q,L as Y,t as Ee,N as ca,am as da,K as ut,U as je,an as va,ao as fa,R as ma}from"./index.07c9eebd.js";import{b as ha,d as ga,e as ya,Q as Ne}from"./use-fullscreen.2f85196a.js";import{a as pa,Q as ba}from"./QBanner.07d3cd09.js";import{u as _t,b as xt,a as wa,v as ct,c as ka,p as dt,d as Ca,r as vt,s as _a,e as xa,C as Fe}from"./ClosePopup.739a61e2.js";import{d as Sa}from"./use-panel.c8491bd7.js";import{p as ge,t as qa,a as ft,f as Ta,e as Da,j as Re,_ as Ha,c as mt,u as Oa}from"./store.dcb5d388.js";import{Q as Pa}from"./QBtnDropdown.3f9e93fe.js";import{a as ht,Q as Ma}from"./QItem.f2d68d82.js";import{Q as za,a as La}from"./QTabPanels.65edf2a3.js";import{Q as Ba}from"./QPage.68a92ccd.js";import"./rtl.b51694b1.js";import"./axios.7331a07d.js";var $a=He({name:"QPopupProxy",props:{..._t,breakpoint:{type:[String,Number],default:450}},emits:["show","hide"],setup(e,{slots:a,emit:n,attrs:s}){const{proxy:u}=Oe(),{$q:k}=u,f=z(!1),h=z(null),q=g(()=>parseInt(e.breakpoint,10)),{canShow:M}=xt({showing:f});function S(){return k.screen.width<q.value||k.screen.height<q.value?"dialog":"menu"}const L=z(S()),T=g(()=>L.value==="menu"?{maxHeight:"99vh"}:{});te(()=>S(),_=>{f.value!==!0&&(L.value=_)});function B(_){f.value=!0,n("show",_)}function V(_){f.value=!1,L.value=S(),n("hide",_)}return Object.assign(u,{show(_){M(_)===!0&&h.value.show(_)},hide(_){h.value.hide(_)},toggle(_){h.value.toggle(_)}}),Yt(u,"currentComponent",()=>({type:L.value,ref:h.value})),()=>{const _={ref:h,...T.value,...s,onShow:B,onHide:V};let y;return L.value==="dialog"?y=Qt:(y=wa,Object.assign(_,{target:e.target,contextMenu:e.contextMenu,noParentEvent:!0,separateClosePopup:!0})),c(y,_,a.default)}}});const Ea=["gregorian","persian"],ja={modelValue:{required:!0},mask:{type:String},locale:Object,calendar:{type:String,validator:e=>Ea.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},Na=["update:modelValue"];function de(e){return e.year+"/"+ge(e.month)+"/"+ge(e.day)}function Fa(e,a){const n=g(()=>e.disable!==!0&&e.readonly!==!0),s=g(()=>n.value===!0?0:-1),u=g(()=>{const h=[];return e.color!==void 0&&h.push(`bg-${e.color}`),e.textColor!==void 0&&h.push(`text-${e.textColor}`),h.join(" ")});function k(){return e.locale!==void 0?{...a.lang.date,...e.locale}:a.lang.date}function f(h){const q=new Date,M=h===!0?null:0;if(e.calendar==="persian"){const S=qa(q);return{year:S.jy,month:S.jm,day:S.jd}}return{year:q.getFullYear(),month:q.getMonth()+1,day:q.getDate(),hour:M,minute:M,second:M,millisecond:M}}return{editable:n,tabindex:s,headerClass:u,getLocale:k,getCurrentDate:f}}const he=20,Ra=["Calendar","Years","Months"],gt=e=>Ra.includes(e),Ae=e=>/^-?[\d]+\/[0-1]\d$/.test(e),we=" \u2014 ";function ve(e){return e.year+"/"+ge(e.month)}var Aa=He({name:"QDate",props:{...ja,...Vt,...pt,multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:Ae},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:Ae},navigationMaxYearMonth:{type:String,validator:Ae},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:gt}},emits:[...Na,"rangeStart","rangeEnd","navigation"],setup(e,{slots:a,emit:n}){const{proxy:s}=Oe(),{$q:u}=s,k=bt(e,u),{getCache:f}=Sa(),{tabindex:h,headerClass:q,getLocale:M,getCurrentDate:S}=Fa(e,u);let L;const T=Ut(e),B=Kt(T),V=z(null),_=z(Ze()),y=z(M()),J=g(()=>Ze()),ae=g(()=>M()),U=g(()=>S()),p=z(et(_.value,y.value)),H=z(e.defaultView),le=u.lang.rtl===!0?"right":"left",$=z(le.value),re=z(le.value),x=p.value.year,w=z(x-x%he-(x<0?he:0)),b=z(null),W=g(()=>{const t=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${e.minimal===!0?"minimal":"standard"}`+(k.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),R=g(()=>e.color||"primary"),G=g(()=>e.textColor||"white"),ie=g(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),Z=g(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),K=g(()=>Z.value.filter(t=>typeof t=="string").map(t=>Me(t,_.value,y.value)).filter(t=>t.dateHash!==null&&t.day!==null&&t.month!==null&&t.year!==null)),oe=g(()=>{const t=o=>Me(o,_.value,y.value);return Z.value.filter(o=>Wt(o)===!0&&o.from!==void 0&&o.to!==void 0).map(o=>({from:t(o.from),to:t(o.to)})).filter(o=>o.from.dateHash!==null&&o.to.dateHash!==null&&o.from.dateHash<o.to.dateHash)}),ue=g(()=>e.calendar!=="persian"?t=>new Date(t.year,t.month-1,t.day):t=>{const o=ft(t.year,t.month,t.day);return new Date(o.gy,o.gm-1,o.gd)}),ce=g(()=>e.calendar==="persian"?de:(t,o,l)=>Ta(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),o===void 0?_.value:o,l===void 0?y.value:l,t.year,t.timezoneOffset)),ne=g(()=>K.value.length+oe.value.reduce((t,o)=>t+1+Da(ue.value(o.to),ue.value(o.from)),0)),fe=g(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length!==0)return e.title;if(b.value!==null){const l=b.value.init,v=ue.value(l);return y.value.daysShort[v.getDay()]+", "+y.value.monthsShort[l.month-1]+" "+l.day+we+"?"}if(ne.value===0)return we;if(ne.value>1)return`${ne.value} ${y.value.pluralDay}`;const t=K.value[0],o=ue.value(t);return isNaN(o.valueOf())===!0?we:y.value.headerTitle!==void 0?y.value.headerTitle(o,t):y.value.daysShort[o.getDay()]+", "+y.value.monthsShort[t.month-1]+" "+t.day}),N=g(()=>K.value.concat(oe.value.map(o=>o.from)).sort((o,l)=>o.year-l.year||o.month-l.month)[0]),se=g(()=>K.value.concat(oe.value.map(o=>o.to)).sort((o,l)=>l.year-o.year||l.month-o.month)[0]),I=g(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length!==0)return e.subtitle;if(ne.value===0)return we;if(ne.value>1){const t=N.value,o=se.value,l=y.value.monthsShort;return l[t.month-1]+(t.year!==o.year?" "+t.year+we+l[o.month-1]+" ":t.month!==o.month?we+l[o.month-1]:"")+" "+o.year}return K.value[0].year}),ee=g(()=>{const t=[u.iconSet.datetime.arrowLeft,u.iconSet.datetime.arrowRight];return u.lang.rtl===!0?t.reverse():t}),Se=g(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):y.value.firstDayOfWeek),r=g(()=>{const t=y.value.daysShort,o=Se.value;return o>0?t.slice(o,7).concat(t.slice(0,o)):t}),i=g(()=>{const t=p.value;return e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():Re(t.year,t.month)}),O=g(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),D=g(()=>{if(e.navigationMinYearMonth===void 0)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),j=g(()=>{if(e.navigationMaxYearMonth===void 0)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),Ce=g(()=>{const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return D.value!==null&&D.value.year>=p.value.year&&(t.year.prev=!1,D.value.year===p.value.year&&D.value.month>=p.value.month&&(t.month.prev=!1)),j.value!==null&&j.value.year<=p.value.year&&(t.year.next=!1,j.value.year===p.value.year&&j.value.month<=p.value.month&&(t.month.next=!1)),t}),qe=g(()=>{const t={};return K.value.forEach(o=>{const l=ve(o);t[l]===void 0&&(t[l]=[]),t[l].push(o.day)}),t}),Je=g(()=>{const t={};return oe.value.forEach(o=>{const l=ve(o.from),v=ve(o.to);if(t[l]===void 0&&(t[l]=[]),t[l].push({from:o.from.day,to:l===v?o.to.day:void 0,range:o}),l<v){let d;const{year:P,month:m}=o.from,C=m<12?{year:P,month:m+1}:{year:P+1,month:1};for(;(d=ve(C))<=v;)t[d]===void 0&&(t[d]=[]),t[d].push({from:void 0,to:d===v?o.to.day:void 0,range:o}),C.month++,C.month>12&&(C.year++,C.month=1)}}),t}),_e=g(()=>{if(b.value===null)return;const{init:t,initHash:o,final:l,finalHash:v}=b.value,[d,P]=o<=v?[t,l]:[l,t],m=ve(d),C=ve(P);if(m!==X.value&&C!==X.value)return;const E={};return m===X.value?(E.from=d.day,E.includeFrom=!0):E.from=1,C===X.value?(E.to=P.day,E.includeTo=!0):E.to=i.value,E}),X=g(()=>ve(p.value)),Ot=g(()=>{const t={};if(e.options===void 0){for(let l=1;l<=i.value;l++)t[l]=!0;return t}const o=typeof e.options=="function"?e.options:l=>e.options.includes(l);for(let l=1;l<=i.value;l++){const v=X.value+"/"+ge(l);t[l]=o(v)}return t}),Pt=g(()=>{const t={};if(e.events===void 0)for(let o=1;o<=i.value;o++)t[o]=!1;else{const o=typeof e.events=="function"?e.events:l=>e.events.includes(l);for(let l=1;l<=i.value;l++){const v=X.value+"/"+ge(l);t[l]=o(v)===!0&&O.value(v)}}return t}),Mt=g(()=>{let t,o;const{year:l,month:v}=p.value;if(e.calendar!=="persian")t=new Date(l,v-1,1),o=new Date(l,v-1,0).getDate();else{const d=ft(l,v,1);t=new Date(d.gy,d.gm-1,d.gd);let P=v-1,m=l;P===0&&(P=12,m--),o=Re(m,P)}return{days:t.getDay()-Se.value-1,endDay:o}}),Ge=g(()=>{const t=[],{days:o,endDay:l}=Mt.value,v=o<0?o+7:o;if(v<6)for(let m=l-v;m<=l;m++)t.push({i:m,fill:!0});const d=t.length;for(let m=1;m<=i.value;m++){const C={i:m,event:Pt.value[m],classes:[]};Ot.value[m]===!0&&(C.in=!0,C.flat=!0),t.push(C)}if(qe.value[X.value]!==void 0&&qe.value[X.value].forEach(m=>{const C=d+m-1;Object.assign(t[C],{selected:!0,unelevated:!0,flat:!1,color:R.value,textColor:G.value})}),Je.value[X.value]!==void 0&&Je.value[X.value].forEach(m=>{if(m.from!==void 0){const C=d+m.from-1,E=d+(m.to||i.value)-1;for(let xe=C;xe<=E;xe++)Object.assign(t[xe],{range:m.range,unelevated:!0,color:R.value,textColor:G.value});Object.assign(t[C],{rangeFrom:!0,flat:!1}),m.to!==void 0&&Object.assign(t[E],{rangeTo:!0,flat:!1})}else if(m.to!==void 0){const C=d+m.to-1;for(let E=d;E<=C;E++)Object.assign(t[E],{range:m.range,unelevated:!0,color:R.value,textColor:G.value});Object.assign(t[C],{flat:!1,rangeTo:!0})}else{const C=d+i.value-1;for(let E=d;E<=C;E++)Object.assign(t[E],{range:m.range,unelevated:!0,color:R.value,textColor:G.value})}}),_e.value!==void 0){const m=d+_e.value.from-1,C=d+_e.value.to-1;for(let E=m;E<=C;E++)t[E].color=R.value,t[E].editRange=!0;_e.value.includeFrom===!0&&(t[m].editRangeFrom=!0),_e.value.includeTo===!0&&(t[C].editRangeTo=!0)}p.value.year===U.value.year&&p.value.month===U.value.month&&(t[d+U.value.day-1].today=!0);const P=t.length%7;if(P>0){const m=7-P;for(let C=1;C<=m;C++)t.push({i:C,fill:!0})}return t.forEach(m=>{let C="q-date__calendar-item ";m.fill===!0?C+="q-date__calendar-item--fill":(C+=`q-date__calendar-item--${m.in===!0?"in":"out"}`,m.range!==void 0&&(C+=` q-date__range${m.rangeTo===!0?"-to":m.rangeFrom===!0?"-from":""}`),m.editRange===!0&&(C+=` q-date__edit-range${m.editRangeFrom===!0?"-from":""}${m.editRangeTo===!0?"-to":""}`),(m.range!==void 0||m.editRange===!0)&&(C+=` text-${m.color}`)),m.classes=C}),t}),zt=g(()=>e.disable===!0?{"aria-disabled":"true"}:e.readonly===!0?{"aria-readonly":"true"}:{});te(()=>e.modelValue,t=>{if(L===t)L=0;else{const o=et(_.value,y.value);ye(o.year,o.month,o)}}),te(H,()=>{V.value!==null&&s.$el.contains(document.activeElement)===!0&&V.value.focus()}),te(()=>p.value.year+"|"+p.value.month,()=>{n("navigation",{year:p.value.year,month:p.value.month})}),te(J,t=>{lt(t,y.value,"mask"),_.value=t}),te(ae,t=>{lt(_.value,t,"locale"),y.value=t});function Xe(){const t=U.value,o=qe.value[ve(t)];(o===void 0||o.includes(t.day)===!1)&&Le(t),Pe(t.year,t.month)}function Lt(t){gt(t)===!0&&(H.value=t)}function Bt(t,o){["month","year"].includes(t)&&(t==="month"?at:ze)(o===!0?-1:1)}function Pe(t,o){H.value="Calendar",ye(t,o)}function $t(t,o){if(e.range===!1||!t){b.value=null;return}const l=Object.assign({...p.value},t),v=o!==void 0?Object.assign({...p.value},o):l;b.value={init:l,initHash:de(l),final:v,finalHash:de(v)},Pe(l.year,l.month)}function Ze(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function Me(t,o,l){return Ha(t,o,l,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function et(t,o){const l=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(l.length===0)return tt();const v=l[l.length-1],d=Me(v.from!==void 0?v.from:v,t,o);return d.dateHash===null?tt():d}function tt(){let t,o;if(e.defaultYearMonth!==void 0){const l=e.defaultYearMonth.split("/");t=parseInt(l[0],10),o=parseInt(l[1],10)}else{const l=U.value!==void 0?U.value:S();t=l.year,o=l.month}return{year:t,month:o,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+ge(o)+"/01"}}function at(t){let o=p.value.year,l=Number(p.value.month)+t;l===13?(l=1,o++):l===0&&(l=12,o--),ye(o,l),ie.value===!0&&Te("month")}function ze(t){const o=Number(p.value.year)+t;ye(o,p.value.month),ie.value===!0&&Te("year")}function Et(t){ye(t,p.value.month),H.value=e.defaultView==="Years"?"Months":"Calendar",ie.value===!0&&Te("year")}function jt(t){ye(p.value.year,t),H.value="Calendar",ie.value===!0&&Te("month")}function Nt(t,o){const l=qe.value[o];(l!==void 0&&l.includes(t.day)===!0?Be:Le)(t)}function me(t){return{year:t.year,month:t.month,day:t.day}}function ye(t,o,l){if(D.value!==null&&t<=D.value.year&&(t=D.value.year,o<D.value.month&&(o=D.value.month)),j.value!==null&&t>=j.value.year&&(t=j.value.year,o>j.value.month&&(o=j.value.month)),l!==void 0){const{hour:d,minute:P,second:m,millisecond:C,timezoneOffset:E,timeHash:xe}=l;Object.assign(p.value,{hour:d,minute:P,second:m,millisecond:C,timezoneOffset:E,timeHash:xe})}const v=t+"/"+ge(o)+"/01";v!==p.value.dateHash&&($.value=p.value.dateHash<v==(u.lang.rtl!==!0)?"left":"right",t!==p.value.year&&(re.value=$.value),Qe(()=>{w.value=t-t%he-(t<0?he:0),Object.assign(p.value,{year:t,month:o,day:1,dateHash:v})}))}function ot(t,o,l){const v=t!==null&&t.length===1&&e.multiple===!1?t[0]:t;L=v;const{reason:d,details:P}=nt(o,l);n("update:modelValue",v,d,P)}function Te(t){const o=K.value[0]!==void 0&&K.value[0].dateHash!==null?{...K.value[0]}:{...p.value};Qe(()=>{o.year=p.value.year,o.month=p.value.month;const l=e.calendar!=="persian"?new Date(o.year,o.month,0).getDate():Re(o.year,o.month);o.day=Math.min(Math.max(1,o.day),l);const v=pe(o);L=v;const{details:d}=nt("",o);n("update:modelValue",v,t,d)})}function nt(t,o){return o.from!==void 0?{reason:`${t}-range`,details:{...me(o.target),from:me(o.from),to:me(o.to)}}:{reason:`${t}-day`,details:me(o)}}function pe(t,o,l){return t.from!==void 0?{from:ce.value(t.from,o,l),to:ce.value(t.to,o,l)}:ce.value(t,o,l)}function Le(t){let o;if(e.multiple===!0)if(t.from!==void 0){const l=de(t.from),v=de(t.to),d=K.value.filter(m=>m.dateHash<l||m.dateHash>v),P=oe.value.filter(({from:m,to:C})=>C.dateHash<l||m.dateHash>v);o=d.concat(P).concat(t).map(m=>pe(m))}else{const l=Z.value.slice();l.push(pe(t)),o=l}else o=pe(t);ot(o,"add",t)}function Be(t){if(e.noUnset===!0)return;let o=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const l=pe(t);t.from!==void 0?o=e.modelValue.filter(v=>v.from!==void 0?v.from!==l.from&&v.to!==l.to:!0):o=e.modelValue.filter(v=>v!==l),o.length===0&&(o=null)}ot(o,"remove",t)}function lt(t,o,l){const v=K.value.concat(oe.value).map(d=>pe(d,t,o)).filter(d=>d.from!==void 0?d.from.dateHash!==null&&d.to.dateHash!==null:d.dateHash!==null);n("update:modelValue",(e.multiple===!0?v:v[0])||null,l)}function Ft(){if(e.minimal!==!0)return c("div",{class:"q-date__header "+q.value},[c("div",{class:"relative-position"},[c(ke,{name:"q-transition--fade"},()=>c("div",{key:"h-yr-"+I.value,class:"q-date__header-subtitle q-date__header-link "+(H.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:h.value,...f("vY",{onClick(){H.value="Years"},onKeyup(t){t.keyCode===13&&(H.value="Years")}})},[I.value]))]),c("div",{class:"q-date__header-title relative-position flex no-wrap"},[c("div",{class:"relative-position col"},[c(ke,{name:"q-transition--fade"},()=>c("div",{key:"h-sub"+fe.value,class:"q-date__header-title-label q-date__header-link "+(H.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:h.value,...f("vC",{onClick(){H.value="Calendar"},onKeyup(t){t.keyCode===13&&(H.value="Calendar")}})},[fe.value]))]),e.todayBtn===!0?c(A,{class:"q-date__header-today self-start",icon:u.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:h.value,onClick:Xe}):null])])}function $e({label:t,type:o,key:l,dir:v,goTo:d,boundaries:P,cls:m}){return[c("div",{class:"row items-center q-date__arrow"},[c(A,{round:!0,dense:!0,size:"sm",flat:!0,icon:ee.value[0],tabindex:h.value,disable:P.prev===!1,...f("go-#"+o,{onClick(){d(-1)}})})]),c("div",{class:"relative-position overflow-hidden flex flex-center"+m},[c(ke,{name:"q-transition--jump-"+v},()=>c("div",{key:l},[c(A,{flat:!0,dense:!0,noCaps:!0,label:t,tabindex:h.value,...f("view#"+o,{onClick:()=>{H.value=o}})})]))]),c("div",{class:"row items-center q-date__arrow"},[c(A,{round:!0,dense:!0,size:"sm",flat:!0,icon:ee.value[1],tabindex:h.value,disable:P.next===!1,...f("go+#"+o,{onClick(){d(1)}})})])]}const Rt={Calendar:()=>[c("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[c("div",{class:"q-date__navigation row items-center no-wrap"},$e({label:y.value.months[p.value.month-1],type:"Months",key:p.value.month,dir:$.value,goTo:at,boundaries:Ce.value.month,cls:" col"}).concat($e({label:p.value.year,type:"Years",key:p.value.year,dir:re.value,goTo:ze,boundaries:Ce.value.year,cls:""}))),c("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},r.value.map(t=>c("div",{class:"q-date__calendar-item"},[c("div",t)]))),c("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[c(ke,{name:"q-transition--slide-"+$.value},()=>c("div",{key:X.value,class:"q-date__calendar-days fit"},Ge.value.map(t=>c("div",{class:t.classes},[t.in===!0?c(A,{class:t.today===!0?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:h.value,...f("day#"+t.i,{onClick:()=>{At(t.i)},onMouseover:()=>{It(t.i)}})},t.event!==!1?()=>c("div",{class:"q-date__event bg-"+t.event}):null):c("div",""+t.i)]))))])])],Months(){const t=p.value.year===U.value.year,o=v=>D.value!==null&&p.value.year===D.value.year&&D.value.month>v||j.value!==null&&p.value.year===j.value.year&&j.value.month<v,l=y.value.monthsShort.map((v,d)=>{const P=p.value.month===d+1;return c("div",{class:"q-date__months-item flex flex-center"},[c(A,{class:t===!0&&U.value.month===d+1?"q-date__today":null,flat:P!==!0,label:v,unelevated:P,color:P===!0?R.value:null,textColor:P===!0?G.value:null,tabindex:h.value,disable:o(d+1),...f("month#"+d,{onClick:()=>{jt(d+1)}})})])});return e.yearsInMonthView===!0&&l.unshift(c("div",{class:"row no-wrap full-width"},[$e({label:p.value.year,type:"Years",key:p.value.year,dir:re.value,goTo:ze,boundaries:Ce.value.year,cls:" col"})])),c("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},l)},Years(){const t=w.value,o=t+he,l=[],v=d=>D.value!==null&&D.value.year>d||j.value!==null&&j.value.year<d;for(let d=t;d<=o;d++){const P=p.value.year===d;l.push(c("div",{class:"q-date__years-item flex flex-center"},[c(A,{key:"yr"+d,class:U.value.year===d?"q-date__today":null,flat:!P,label:d,dense:!0,unelevated:P,color:P===!0?R.value:null,textColor:P===!0?G.value:null,tabindex:h.value,disable:v(d),...f("yr#"+d,{onClick:()=>{Et(d)}})})]))}return c("div",{class:"q-date__view q-date__years flex flex-center"},[c("div",{class:"col-auto"},[c(A,{round:!0,dense:!0,flat:!0,icon:ee.value[0],tabindex:h.value,disable:v(t),...f("y-",{onClick:()=>{w.value-=he}})})]),c("div",{class:"q-date__years-content col self-stretch row items-center"},l),c("div",{class:"col-auto"},[c(A,{round:!0,dense:!0,flat:!0,icon:ee.value[1],tabindex:h.value,disable:v(o),...f("y+",{onClick:()=>{w.value+=he}})})])])}};function At(t){const o={...p.value,day:t};if(e.range===!1){Nt(o,X.value);return}if(b.value===null){const l=Ge.value.find(d=>d.fill!==!0&&d.i===t);if(e.noUnset!==!0&&l.range!==void 0){Be({target:o,from:l.range.from,to:l.range.to});return}if(l.selected===!0){Be(o);return}const v=de(o);b.value={init:o,initHash:v,final:o,finalHash:v},n("rangeStart",me(o))}else{const l=b.value.initHash,v=de(o),d=l<=v?{from:b.value.init,to:o}:{from:o,to:b.value.init};b.value=null,Le(l===v?o:{target:o,...d}),n("rangeEnd",{from:me(d.from),to:me(d.to)})}}function It(t){if(b.value!==null){const o={...p.value,day:t};Object.assign(b.value,{final:o,finalHash:de(o)})}}return Object.assign(s,{setToday:Xe,setView:Lt,offsetCalendar:Bt,setCalendarTo:Pe,setEditingRange:$t}),()=>{const t=[c("div",{class:"q-date__content col relative-position"},[c(ke,{name:"q-transition--fade"},Rt[H.value])])],o=We(a.default);return o!==void 0&&t.push(c("div",{class:"q-date__actions"},o)),e.name!==void 0&&e.disable!==!0&&B(t,"push"),c("div",{class:W.value,...zt.value},[Ft(),c("div",{ref:V,class:"q-date__main col column",tabindex:-1},t)])}}});function St(e,a){if(a&&e===a)return null;const n=e.nodeName.toLowerCase();if(["div","li","ul","ol","blockquote"].includes(n)===!0)return e;const s=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,u=s.display;return u==="block"||u==="table"?e:St(e.parentNode)}function Ie(e,a,n){return!e||e===document.body?!1:n===!0&&e===a||(a===document?document.body:a).contains(e.parentNode)}function qt(e,a,n){if(n||(n=document.createRange(),n.selectNode(e),n.setStart(e,0)),a.count===0)n.setEnd(e,a.count);else if(a.count>0)if(e.nodeType===Node.TEXT_NODE)e.textContent.length<a.count?a.count-=e.textContent.length:(n.setEnd(e,a.count),a.count=0);else for(let s=0;a.count!==0&&s<e.childNodes.length;s++)n=qt(e.childNodes[s],a,n);return n}const Ia=/^https?:\/\//;class Ya{constructor(a,n){this.el=a,this.eVm=n,this._range=null}get selection(){if(this.el){const a=document.getSelection();if(Ie(a.anchorNode,this.el,!0)&&Ie(a.focusNode,this.el,!0))return a}return null}get hasSelection(){return this.selection!==null?this.selection.toString().length!==0:!1}get range(){const a=this.selection;return a!==null&&a.rangeCount?a.getRangeAt(0):this._range}get parent(){const a=this.range;if(a!==null){const n=a.startContainer;return n.nodeType===document.ELEMENT_NODE?n:n.parentNode}return null}get blockParent(){const a=this.parent;return a!==null?St(a,this.el):null}save(a=this.range){a!==null&&(this._range=a)}restore(a=this._range){const n=document.createRange(),s=document.getSelection();a!==null?(n.setStart(a.startContainer,a.startOffset),n.setEnd(a.endContainer,a.endOffset),s.removeAllRanges(),s.addRange(n)):(s.selectAllChildren(this.el),s.collapseToEnd())}savePosition(){let a=-1,n;const s=document.getSelection(),u=this.el.parentNode;if(s.focusNode&&Ie(s.focusNode,u))for(n=s.focusNode,a=s.focusOffset;n&&n!==u;)n!==this.el&&n.previousSibling?(n=n.previousSibling,a+=n.textContent.length):n=n.parentNode;this.savedPos=a}restorePosition(a=0){if(this.savedPos>0&&this.savedPos<a){const n=window.getSelection(),s=qt(this.el,{count:this.savedPos});s&&(s.collapse(!1),n.removeAllRanges(),n.addRange(s))}}hasParent(a,n){const s=n?this.parent:this.blockParent;return s!==null?s.nodeName.toLowerCase()===a.toLowerCase():!1}hasParents(a,n,s=this.parent){return s===null?!1:a.includes(s.nodeName.toLowerCase())===!0?!0:n===!0?this.hasParents(a,n,s.parentNode):!1}is(a,n){if(this.selection===null)return!1;switch(a){case"formatBlock":return n==="DIV"&&this.parent===this.el||this.hasParent(n,n==="PRE");case"link":return this.hasParent("A",!0);case"fontSize":return document.queryCommandValue(a)===n;case"fontName":const s=document.queryCommandValue(a);return s===`"${n}"`||s===n;case"fullscreen":return this.eVm.inFullscreen.value;case"viewsource":return this.eVm.isViewingSource.value;case void 0:return!1;default:const u=document.queryCommandState(a);return n!==void 0?u===n:u}}getParentAttribute(a){return this.parent!==null?this.parent.getAttribute(a):null}can(a){if(a==="outdent")return this.hasParents(["blockquote","li"],!0);if(a==="indent")return this.hasParents(["li"],!0);if(a==="link")return this.selection!==null||this.is("link")}apply(a,n,s=Jt){if(a==="formatBlock")["BLOCKQUOTE","H1","H2","H3","H4","H5","H6"].includes(n)&&this.is(a,n)&&(a="outdent",n=null),n==="PRE"&&this.is(a,"PRE")&&(n="P");else if(a==="print"){s();const u=window.open();u.document.write(`
        <!doctype html>
        <html>
          <head>
            <title>Print - ${document.title}</title>
          </head>
          <body>
            <div>${this.el.innerHTML}</div>
          </body>
        </html>
      `),u.print(),u.close();return}else if(a==="link"){const u=this.getParentAttribute("href");if(u===null){const k=this.selectWord(this.selection),f=k?k.toString():"";if(!f.length&&(!this.range||!this.range.cloneContents().querySelector("img")))return;this.eVm.editLinkUrl.value=Ia.test(f)?f:"https://",document.execCommand("createLink",!1,this.eVm.editLinkUrl.value),this.save(k.getRangeAt(0))}else this.eVm.editLinkUrl.value=u,this.range.selectNodeContents(this.parent),this.save();return}else if(a==="fullscreen"){this.eVm.toggleFullscreen(),s();return}else if(a==="viewsource"){this.eVm.isViewingSource.value=this.eVm.isViewingSource.value===!1,this.eVm.setContent(this.eVm.props.modelValue),s();return}document.execCommand(a,!1,n),s()}selectWord(a){if(a===null||a.isCollapsed!==!0||a.modify===void 0)return a;const n=document.createRange();n.setStart(a.anchorNode,a.anchorOffset),n.setEnd(a.focusNode,a.focusOffset);const s=n.collapsed?["backward","forward"]:["forward","backward"];n.detach();const u=a.focusNode,k=a.focusOffset;return a.collapse(a.anchorNode,a.anchorOffset),a.modify("move",s[0],"character"),a.modify("move",s[1],"word"),a.extend(u,k),a.modify("extend",s[1],"character"),a.modify("extend",s[0],"word"),a}}var Qa=He({name:"QTooltip",inheritAttrs:!1,props:{..._t,...Gt,...Xt,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{default:"jump-down"},transitionHide:{default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:ct},self:{type:String,default:"top middle",validator:ct},offset:{type:Array,default:()=>[14,14],validator:ka},scrollTarget:{default:void 0},delay:{type:Number,default:0},hideDelay:{type:Number,default:0}},emits:[...Zt],setup(e,{slots:a,emit:n,attrs:s}){let u,k;const f=Oe(),{proxy:{$q:h}}=f,q=z(null),M=z(!1),S=g(()=>dt(e.anchor,h.lang.rtl)),L=g(()=>dt(e.self,h.lang.rtl)),T=g(()=>e.persistent!==!0),{registerTick:B,removeTick:V}=ea(),{registerTimeout:_}=ta(),{transitionProps:y,transitionStyle:J}=aa(e),{localScrollTarget:ae,changeScrollEvent:U,unconfigureScrollTarget:p}=Ca(e,ce),{anchorEl:H,canShow:le,anchorEvents:$}=xt({showing:M,configureAnchorEl:ue}),{show:re,hide:x}=oa({showing:M,canShow:le,handleShow:R,handleHide:G,hideOnRouteChange:T,processOnMount:!0});Object.assign($,{delayShow:K,delayHide:oe});const{showPortal:w,hidePortal:b,renderPortal:W}=na(f,q,fe,"tooltip");if(h.platform.is.mobile===!0){const N={anchorEl:H,innerRef:q,onClickOutside(I){return x(I),I.target.classList.contains("q-dialog__backdrop")&&wt(I),!0}},se=g(()=>e.modelValue===null&&e.persistent!==!0&&M.value===!0);te(se,I=>{(I===!0?xa:vt)(N)}),Ve(()=>{vt(N)})}function R(N){w(),B(()=>{k=new MutationObserver(()=>Z()),k.observe(q.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),Z(),ce()}),u===void 0&&(u=te(()=>h.screen.width+"|"+h.screen.height+"|"+e.self+"|"+e.anchor+"|"+h.lang.rtl,Z)),_(()=>{w(!0),n("show",N)},e.transitionDuration)}function G(N){V(),b(),ie(),_(()=>{b(!0),n("hide",N)},e.transitionDuration)}function ie(){k!==void 0&&(k.disconnect(),k=void 0),u!==void 0&&(u(),u=void 0),p(),rt($,"tooltipTemp")}function Z(){const N=q.value;H.value===null||!N||_a({el:N,offset:e.offset,anchorEl:H.value,anchorOrigin:S.value,selfOrigin:L.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function K(N){if(h.platform.is.mobile===!0){mt(),document.body.classList.add("non-selectable");const se=H.value,I=["touchmove","touchcancel","touchend","click"].map(ee=>[se,ee,"delayHide","passiveCapture"]);it($,"tooltipTemp",I)}_(()=>{re(N)},e.delay)}function oe(N){h.platform.is.mobile===!0&&(rt($,"tooltipTemp"),mt(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),_(()=>{x(N)},e.hideDelay)}function ue(){if(e.noParentEvent===!0||H.value===null)return;const N=h.platform.is.mobile===!0?[[H.value,"touchstart","delayShow","passive"]]:[[H.value,"mouseenter","delayShow","passive"],[H.value,"mouseleave","delayHide","passive"]];it($,"anchor",N)}function ce(){if(H.value!==null||e.scrollTarget!==void 0){ae.value=la(H.value,e.scrollTarget);const N=e.noParentEvent===!0?Z:x;U(ae.value,N)}}function ne(){return M.value===!0?c("div",{...s,ref:q,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",s.class],style:[s.style,J.value],role:"tooltip"},We(a.default)):null}function fe(){return c(ke,y.value,ne)}return Ve(ie),Object.assign(f.proxy,{updatePosition:Z}),W}});function Tt(e,a,n){a.handler?a.handler(e,n,n.caret):n.runCmd(a.cmd,a.param)}function Ke(e){return c("div",{class:"q-editor__toolbar-group"},e)}function Dt(e,a,n,s=!1){const u=s||(a.type==="toggle"?a.toggled?a.toggled(e):a.cmd&&e.caret.is(a.cmd,a.param):!1),k=[];if(a.tip&&e.$q.platform.is.desktop){const f=a.key?c("div",[c("small",`(CTRL + ${String.fromCharCode(a.key)})`)]):null;k.push(c(Qa,{delay:1e3},()=>[c("div",{innerHTML:a.tip}),f]))}return c(A,{...e.buttonProps.value,icon:a.icon!==null?a.icon:void 0,color:u?a.toggleColor||e.props.toolbarToggleColor:a.color||e.props.toolbarColor,textColor:u&&!e.props.toolbarPush?null:a.textColor||e.props.toolbarTextColor,label:a.label,disable:a.disable?typeof a.disable=="function"?a.disable(e):!0:!1,size:"sm",onClick(f){n&&n(),Tt(f,a,e)}},()=>k)}function Va(e,a){const n=a.list==="only-icons";let s=a.label,u=a.icon!==null?a.icon:void 0,k,f;function h(){M.component.proxy.hide()}if(n)f=a.options.map(S=>{const L=S.type===void 0?e.caret.is(S.cmd,S.param):!1;return L&&(s=S.tip,u=S.icon!==null?S.icon:void 0),Dt(e,S,h,L)}),k=e.toolbarBackgroundClass.value,f=[Ke(f)];else{const S=e.props.toolbarToggleColor!==void 0?`text-${e.props.toolbarToggleColor}`:null,L=e.props.toolbarTextColor!==void 0?`text-${e.props.toolbarTextColor}`:null,T=a.list==="no-icons";f=a.options.map(B=>{const V=B.disable?B.disable(e):!1,_=B.type===void 0?e.caret.is(B.cmd,B.param):!1;_&&(s=B.tip,u=B.icon!==null?B.icon:void 0);const y=B.htmlTip;return c(Ma,{active:_,activeClass:S,clickable:!0,disable:V,dense:!0,onClick(J){h(),e.contentRef.value!==null&&e.contentRef.value.focus(),e.caret.restore(),Tt(J,B,e)}},()=>[T===!0?null:c(ht,{class:_?S:L,side:!0},()=>c(Ue,{name:B.icon!==null?B.icon:void 0})),c(ht,y?()=>c("div",{class:"text-no-wrap",innerHTML:B.htmlTip}):B.tip?()=>c("div",{class:"text-no-wrap"},B.tip):void 0)])}),k=[e.toolbarBackgroundClass.value,L]}const q=a.highlight&&s!==a.label,M=c(Pa,{...e.buttonProps.value,noCaps:!0,noWrap:!0,color:q?e.props.toolbarToggleColor:e.props.toolbarColor,textColor:q&&!e.props.toolbarPush?null:e.props.toolbarTextColor,label:a.fixedLabel?a.label:s,icon:a.fixedIcon?a.icon!==null?a.icon:void 0:u,contentClass:k,onShow:S=>e.emit("dropdownShow",S),onHide:S=>e.emit("dropdownHide",S),onBeforeShow:S=>e.emit("dropdownBeforeShow",S),onBeforeHide:S=>e.emit("dropdownBeforeHide",S)},()=>f);return M}function Ua(e){if(e.caret)return e.buttons.value.filter(a=>!e.isViewingSource.value||a.find(n=>n.cmd==="viewsource")).map(a=>Ke(a.map(n=>e.isViewingSource.value&&n.cmd!=="viewsource"?!1:n.type==="slot"?We(e.slots[n.slot]):n.type==="dropdown"?Va(e,n):Dt(e,n))))}function Wa(e,a,n,s={}){const u=Object.keys(s);if(u.length===0)return{};const k={default_font:{cmd:"fontName",param:e,icon:n,tip:a}};return u.forEach(f=>{const h=s[f];k[f]={cmd:"fontName",param:h,icon:n,tip:h,htmlTip:`<font face="${h}">${h}</font>`}}),k}function Ka(e){if(e.caret){const a=e.props.toolbarColor||e.props.toolbarTextColor;let n=e.editLinkUrl.value;const s=()=>{e.caret.restore(),n!==e.editLinkUrl.value&&document.execCommand("createLink",!1,n===""?" ":n),e.editLinkUrl.value=null};return[c("div",{class:`q-mx-xs text-${a}`},`${e.$q.lang.editor.url}: `),c("input",{key:"qedt_btm_input",class:"col q-editor__link-input",value:n,onInput:u=>{ra(u),n=u.target.value},onKeydown:u=>{if(kt(u)!==!0)switch(u.keyCode){case 13:return st(u),s();case 27:st(u),e.caret.restore(),(!e.editLinkUrl.value||e.editLinkUrl.value==="https://")&&document.execCommand("unlink"),e.editLinkUrl.value=null;break}}}),Ke([c(A,{key:"qedt_btm_rem",tabindex:-1,...e.buttonProps.value,label:e.$q.lang.label.remove,noCaps:!0,onClick:()=>{e.caret.restore(),document.execCommand("unlink"),e.editLinkUrl.value=null}}),c(A,{key:"qedt_btm_upd",...e.buttonProps.value,label:e.$q.lang.label.update,noCaps:!0,onClick:s})])]}}const Ja=Object.prototype.toString,Ye=Object.prototype.hasOwnProperty,Ga=new Set(["Boolean","Number","String","Function","Array","Date","RegExp"].map(e=>"[object "+e+"]"));function yt(e){if(e!==Object(e)||Ga.has(Ja.call(e))===!0||e.constructor&&Ye.call(e,"constructor")===!1&&Ye.call(e.constructor.prototype,"isPrototypeOf")===!1)return!1;let a;for(a in e);return a===void 0||Ye.call(e,a)}function Ht(){let e,a,n,s,u,k,f=arguments[0]||{},h=1,q=!1;const M=arguments.length;for(typeof f=="boolean"&&(q=f,f=arguments[1]||{},h=2),Object(f)!==f&&typeof f!="function"&&(f={}),M===h&&(f=this,h--);h<M;h++)if((e=arguments[h])!==null)for(a in e)n=f[a],s=e[a],f!==s&&(q===!0&&s&&((u=Array.isArray(s))||yt(s)===!0)?(u===!0?k=Array.isArray(n)===!0?n:[]:k=yt(n)===!0?n:{},f[a]=Ht(q,k,s)):s!==void 0&&(f[a]=s));return f}var Xa=He({name:"QEditor",props:{...pt,...ha,modelValue:{type:String,required:!0},readonly:Boolean,disable:Boolean,minHeight:{type:String,default:"10rem"},maxHeight:String,height:String,definitions:Object,fonts:Object,placeholder:String,toolbar:{type:Array,validator:e=>e.length===0||e.every(a=>a.length),default(){return[["left","center","right","justify"],["bold","italic","underline","strike"],["undo","redo"]]}},toolbarColor:String,toolbarBg:String,toolbarTextColor:String,toolbarToggleColor:{type:String,default:"primary"},toolbarOutline:Boolean,toolbarPush:Boolean,toolbarRounded:Boolean,paragraphTag:{type:String,validator:e=>["div","p"].includes(e),default:"div"},contentStyle:Object,contentClass:[Object,Array,String],square:Boolean,flat:Boolean,dense:Boolean},emits:[...ga,"update:modelValue","keydown","click","mouseup","keyup","touchend","focus","blur","dropdownShow","dropdownHide","dropdownBeforeShow","dropdownBeforeHide","linkShow","linkHide"],setup(e,{slots:a,emit:n,attrs:s}){const{proxy:u,vnode:k}=Oe(),{$q:f}=u,h=bt(e,f),{inFullscreen:q,toggleFullscreen:M}=ya(),S=ia(s,k),L=z(null),T=z(null),B=z(null),V=z(!1),_=g(()=>!e.readonly&&!e.disable);let y,J,ae=e.modelValue;document.execCommand("defaultParagraphSeparator",!1,e.paragraphTag),y=window.getComputedStyle(document.body).fontFamily;const U=g(()=>e.toolbarBg?` bg-${e.toolbarBg}`:""),p=g(()=>{const r=e.toolbarOutline!==!0&&e.toolbarPush!==!0;return{type:"a",flat:r,noWrap:!0,outline:e.toolbarOutline,push:e.toolbarPush,rounded:e.toolbarRounded,dense:!0,color:e.toolbarColor,disable:!_.value,size:"sm"}}),H=g(()=>{const r=f.lang.editor,i=f.iconSet.editor;return{bold:{cmd:"bold",icon:i.bold,tip:r.bold,key:66},italic:{cmd:"italic",icon:i.italic,tip:r.italic,key:73},strike:{cmd:"strikeThrough",icon:i.strikethrough,tip:r.strikethrough,key:83},underline:{cmd:"underline",icon:i.underline,tip:r.underline,key:85},unordered:{cmd:"insertUnorderedList",icon:i.unorderedList,tip:r.unorderedList},ordered:{cmd:"insertOrderedList",icon:i.orderedList,tip:r.orderedList},subscript:{cmd:"subscript",icon:i.subscript,tip:r.subscript,htmlTip:"x<subscript>2</subscript>"},superscript:{cmd:"superscript",icon:i.superscript,tip:r.superscript,htmlTip:"x<superscript>2</superscript>"},link:{cmd:"link",disable:O=>O.caret&&!O.caret.can("link"),icon:i.hyperlink,tip:r.hyperlink,key:76},fullscreen:{cmd:"fullscreen",icon:i.toggleFullscreen,tip:r.toggleFullscreen,key:70},viewsource:{cmd:"viewsource",icon:i.viewSource,tip:r.viewSource},quote:{cmd:"formatBlock",param:"BLOCKQUOTE",icon:i.quote,tip:r.quote,key:81},left:{cmd:"justifyLeft",icon:i.left,tip:r.left},center:{cmd:"justifyCenter",icon:i.center,tip:r.center},right:{cmd:"justifyRight",icon:i.right,tip:r.right},justify:{cmd:"justifyFull",icon:i.justify,tip:r.justify},print:{type:"no-state",cmd:"print",icon:i.print,tip:r.print,key:80},outdent:{type:"no-state",disable:O=>O.caret&&!O.caret.can("outdent"),cmd:"outdent",icon:i.outdent,tip:r.outdent},indent:{type:"no-state",disable:O=>O.caret&&!O.caret.can("indent"),cmd:"indent",icon:i.indent,tip:r.indent},removeFormat:{type:"no-state",cmd:"removeFormat",icon:i.removeFormat,tip:r.removeFormat},hr:{type:"no-state",cmd:"insertHorizontalRule",icon:i.hr,tip:r.hr},undo:{type:"no-state",cmd:"undo",icon:i.undo,tip:r.undo,key:90},redo:{type:"no-state",cmd:"redo",icon:i.redo,tip:r.redo,key:89},h1:{cmd:"formatBlock",param:"H1",icon:i.heading1||i.heading,tip:r.heading1,htmlTip:`<h1 class="q-ma-none">${r.heading1}</h1>`},h2:{cmd:"formatBlock",param:"H2",icon:i.heading2||i.heading,tip:r.heading2,htmlTip:`<h2 class="q-ma-none">${r.heading2}</h2>`},h3:{cmd:"formatBlock",param:"H3",icon:i.heading3||i.heading,tip:r.heading3,htmlTip:`<h3 class="q-ma-none">${r.heading3}</h3>`},h4:{cmd:"formatBlock",param:"H4",icon:i.heading4||i.heading,tip:r.heading4,htmlTip:`<h4 class="q-ma-none">${r.heading4}</h4>`},h5:{cmd:"formatBlock",param:"H5",icon:i.heading5||i.heading,tip:r.heading5,htmlTip:`<h5 class="q-ma-none">${r.heading5}</h5>`},h6:{cmd:"formatBlock",param:"H6",icon:i.heading6||i.heading,tip:r.heading6,htmlTip:`<h6 class="q-ma-none">${r.heading6}</h6>`},p:{cmd:"formatBlock",param:e.paragraphTag,icon:i.heading,tip:r.paragraph},code:{cmd:"formatBlock",param:"PRE",icon:i.code,htmlTip:`<code>${r.code}</code>`},"size-1":{cmd:"fontSize",param:"1",icon:i.size1||i.size,tip:r.size1,htmlTip:`<font size="1">${r.size1}</font>`},"size-2":{cmd:"fontSize",param:"2",icon:i.size2||i.size,tip:r.size2,htmlTip:`<font size="2">${r.size2}</font>`},"size-3":{cmd:"fontSize",param:"3",icon:i.size3||i.size,tip:r.size3,htmlTip:`<font size="3">${r.size3}</font>`},"size-4":{cmd:"fontSize",param:"4",icon:i.size4||i.size,tip:r.size4,htmlTip:`<font size="4">${r.size4}</font>`},"size-5":{cmd:"fontSize",param:"5",icon:i.size5||i.size,tip:r.size5,htmlTip:`<font size="5">${r.size5}</font>`},"size-6":{cmd:"fontSize",param:"6",icon:i.size6||i.size,tip:r.size6,htmlTip:`<font size="6">${r.size6}</font>`},"size-7":{cmd:"fontSize",param:"7",icon:i.size7||i.size,tip:r.size7,htmlTip:`<font size="7">${r.size7}</font>`}}}),le=g(()=>{const r=e.definitions||{},i=e.definitions||e.fonts?Ht(!0,{},H.value,r,Wa(y,f.lang.editor.defaultFont,f.iconSet.editor.font,e.fonts)):H.value;return e.toolbar.map(O=>O.map(D=>{if(D.options)return{type:"dropdown",icon:D.icon,label:D.label,size:"sm",dense:!0,fixedLabel:D.fixedLabel,fixedIcon:D.fixedIcon,highlight:D.highlight,list:D.list,options:D.options.map(Ce=>i[Ce])};const j=i[D];return j?j.type==="no-state"||r[D]&&(j.cmd===void 0||H.value[j.cmd]&&H.value[j.cmd].type==="no-state")?j:Object.assign({type:"toggle"},j):{type:"slot",slot:D}}))}),$={$q:f,props:e,slots:a,emit:n,inFullscreen:q,toggleFullscreen:M,runCmd:se,isViewingSource:V,editLinkUrl:B,toolbarBackgroundClass:U,buttonProps:p,contentRef:T,buttons:le,setContent:N};te(()=>e.modelValue,r=>{ae!==r&&(ae=r,N(r,!0))}),te(B,r=>{n(`link-${r?"Show":"Hide"}`)});const re=g(()=>e.toolbar&&e.toolbar.length!==0),x=g(()=>{const r={},i=O=>{O.key&&(r[O.key]={cmd:O.cmd,param:O.param})};return le.value.forEach(O=>{O.forEach(D=>{D.options?D.options.forEach(i):i(D)})}),r}),w=g(()=>q.value?e.contentStyle:[{minHeight:e.minHeight,height:e.height,maxHeight:e.maxHeight},e.contentStyle]),b=g(()=>`q-editor q-editor--${V.value===!0?"source":"default"}`+(e.disable===!0?" disabled":"")+(q.value===!0?" fullscreen column":"")+(e.square===!0?" q-editor--square no-border-radius":"")+(e.flat===!0?" q-editor--flat":"")+(e.dense===!0?" q-editor--dense":"")+(h.value===!0?" q-editor--dark q-dark":"")),W=g(()=>[e.contentClass,"q-editor__content",{col:q.value,"overflow-auto":q.value||e.maxHeight}]),R=g(()=>e.disable===!0?{"aria-disabled":"true"}:e.readonly===!0?{"aria-readonly":"true"}:{});function G(){if(T.value!==null){const r=`inner${V.value===!0?"Text":"HTML"}`,i=T.value[r];i!==e.modelValue&&(ae=i,n("update:modelValue",i))}}function ie(r){if(n("keydown",r),r.ctrlKey!==!0||kt(r)===!0){I();return}const i=r.keyCode,O=x.value[i];if(O!==void 0){const{cmd:D,param:j}=O;wt(r),se(D,j,!1)}}function Z(r){I(),n("click",r)}function K(r){if(T.value!==null){const{scrollTop:i,scrollHeight:O}=T.value;J=O-i}$.caret.save(),n("blur",r)}function oe(r){Qe(()=>{T.value!==null&&J!==void 0&&(T.value.scrollTop=T.value.scrollHeight-J)}),n("focus",r)}function ue(r){const i=L.value;if(i!==null&&i.contains(r.target)===!0&&(r.relatedTarget===null||i.contains(r.relatedTarget)!==!0)){const O=`inner${V.value===!0?"Text":"HTML"}`;$.caret.restorePosition(T.value[O].length),I()}}function ce(r){const i=L.value;i!==null&&i.contains(r.target)===!0&&(r.relatedTarget===null||i.contains(r.relatedTarget)!==!0)&&($.caret.savePosition(),I())}function ne(){J=void 0}function fe(r){$.caret.save()}function N(r,i){if(T.value!==null){i===!0&&$.caret.savePosition();const O=`inner${V.value===!0?"Text":"HTML"}`;T.value[O]=r,i===!0&&($.caret.restorePosition(T.value[O].length),I())}}function se(r,i,O=!0){ee(),$.caret.restore(),$.caret.apply(r,i,()=>{ee(),$.caret.save(),O&&I()})}function I(){setTimeout(()=>{B.value=null,u.$forceUpdate()},1)}function ee(){sa(()=>{T.value!==null&&T.value.focus({preventScroll:!0})})}function Se(){return T.value}return Ct(()=>{$.caret=u.caret=new Ya(T.value,$),N(e.modelValue),I(),document.addEventListener("selectionchange",fe)}),Ve(()=>{document.removeEventListener("selectionchange",fe)}),Object.assign(u,{runCmd:se,refreshToolbar:I,focus:ee,getContentEl:Se}),()=>{let r;if(re.value){const i=[c("div",{key:"qedt_top",class:"q-editor__toolbar row no-wrap scroll-x"+U.value},Ua($))];B.value!==null&&i.push(c("div",{key:"qedt_btm",class:"q-editor__toolbar row no-wrap items-center scroll-x"+U.value},Ka($))),r=c("div",{key:"toolbar_ctainer",class:"q-editor__toolbars-container"},i)}return c("div",{ref:L,class:b.value,style:{height:q.value===!0?"100%":null},...R.value,onFocusin:ue,onFocusout:ce},[r,c("div",{ref:T,style:w.value,class:W.value,contenteditable:_.value,placeholder:e.placeholder,...S.listeners.value,onInput:G,onKeydown:ie,onClick:Z,onBlur:K,onFocus:oe,onMousedown:ne,onTouchstartPassive:ne})])}}});const Za={class:"row q-pa-xs"},eo={class:"col-12"},to={class:"column items-center"},ao={class:"row justify-end"},oo={class:"q-gutter-sm"},no=Q("div",{class:"text-subtitle2"},"\u9009\u62E9\u8303\u56F4\uFF1A",-1),lo=Q("div",{class:"text-subtitle2"},"\u6700\u8FD1\uFF1A",-1),ro=Q("div",{class:"text-subtitle2"},"\u6708",-1),io=Q("div",{class:"text-subtitle2"},"\u65E5\u5386\u989C\u8272\uFF1A",-1),so=Q("div",{class:"text-subtitle2"},null,-1),uo=Q("div",{class:"text-subtitle2"},null,-1),co=Q("div",{class:"text-subtitle2"},"\u4E8B\u4EF6\u989C\u8272\uFF1A",-1),vo=Q("div",{class:"text-subtitle2"},null,-1),fo=Q("div",{class:"text-subtitle2"},null,-1),mo={class:"col-12"},ho={key:0,class:"no-tasks text-center",style:{height:"100%"}},go={autocorrect:"off",autocapitalize:"off",autocomplete:"off",spellcheck:"false"},yo={class:"row justify-end q-pa-md q-gutter-x-sm"},po={class:"text-h5"},Po={__name:"LoggerPage",setup(e){const a=Oa(),n=z(!1),s=z(a.todayDate),u=z([]),k=z([]),f=z("orange"),h=z("primary"),q=z(1),M=z(!1),S=z(!0),L=z(!1),T=z([]),B=z(!1),V=[1,3,6,"\u5168\u90E8"],_=["primary","orange","green","teal","brown","purple"],y=ua({_id:"",date:"",user:"",logger:""});te(()=>s.value,x=>{for(const w of k.value)if(x===w){L.value=!0;break}else L.value=!1});const J=async()=>{await a.axios.get("/query/logger",{params:{user:a.user.email,month:q.value}}).then(x=>{u.value=x.data,T.value=u.value.map(w=>w.logger),k.value=u.value.map(w=>w.date)}).catch(x=>{a.failureTip(x.response.data.msg)})},ae=x=>{const w=u.value[x].logger,b=T.value[x];w!==b?M.value=!0:M.value=!1},U=x=>{u.value[x].logger=T.value[x],M.value=!1},p=async()=>{y.logger.length>0&&(y.date=s.value,y.user=a.user.email,await a.axios.post("/query/addlogger",y).then(x=>{x.data.id&&(y._id=x.data.id),x.data.logger?y.logger=x.data.logger+"<ul><li>"+y.logger+"</li></ul>":y.logger="<ul><li>"+y.logger+"</li></ul>",u.value.unshift(JSON.parse(JSON.stringify(y))),T.value=u.value.map(w=>w.logger),k.value=u.value.map(w=>w.date),a.successTip(x.data.msg),console.log(u.value),L.value=!0}).catch(x=>{console.log(x.response.data)}).finally(()=>{y.logger=""}))},H=async(x,w,b,W)=>{w==="<br><ul><li>"||w==="<div><br></div>"||w.length===0?le(x,W):(y._id=x,y.date=b,y.user=a.user.email,y.logger=w,await a.axios.post("/query/editlogger",y).then(R=>{u.value[W].logger=w,T.value=u.value.map(G=>G.logger),a.successTip(R.data.msg)}).catch(R=>{a.failureTip(R.response.data.msg)}).finally(()=>{y.date="",y.logger="",y._id="",M.value=!1,S.value=!0}))},le=(x,w)=>{a.$q.dialog({title:"\u786E\u5B9A",message:"\u786E\u5B9A\u8981\u5220\u9664\u8BB0\u5F55?",cancel:!0,persistent:!0,ok:{push:!0,label:"\u786E\u5B9A",color:"green"},cancel:{push:!0,color:"blue-grey",label:"\u53D6\u6D88"}}).onOk(async()=>{await a.axios.delete("/query/deletelogger",{params:{id:x,user:a.user.email}}).then(b=>{u.value.splice(w,1),T.value=u.value.map(W=>W.logger),k.value=u.value.map(W=>W.date),a.successTip(b.data.msg),M.value=!1,L.value=!1}).catch(b=>{a.failureTip(b.response.data.msg)})}).onCancel(()=>{})},$=()=>{console.log("changeEventColor")},re=()=>{console.log("changeEventColor")};return Ct(async()=>{if(localStorage.getItem("token")!==null)try{await a.verifyUser().then(()=>{J()}).catch(()=>{router.push("/index")})}catch{router.push("/index")}else router.push("/index");L.value=!0}),(x,w)=>(be(),De(Ba,{class:"q-pa-xs column"},{default:F(()=>[Q("div",Za,[Q("div",eo,[Q("div",to,[Y(Aa,{modelValue:s.value,"onUpdate:modelValue":w[3]||(w[3]=b=>s.value=b),class:"item-center",landscape:ca(a).$q.screen.gt.md,events:k.value,"years-in-month-view":"",color:h.value,"event-color":f.value,"today-btn":"",style:{width:"100%","max-width":"550px"}},{default:F(()=>[Q("div",ao,[Y(A,{label:"\u8BBE\u7F6E",flat:""},{default:F(()=>[Y($a,null,{default:F(()=>[Y(pa,{style:{height:"250px",width:"320px"}},{default:F(()=>[Q("div",oo,[Y(Ne,{modelValue:q.value,"onUpdate:modelValue":w[0]||(w[0]=b=>q.value=b),outlined:"",dense:"",options:V,"transition-show":"jump-up","transition-hide":"jump-up"},{before:F(()=>[no]),prepend:F(()=>[lo]),append:F(()=>[ro]),after:F(()=>[Ee(Y(A,{flat:"",icon:"done",color:"primary",onClick:J},null,512),[[Fe]])]),_:1},8,["modelValue"]),Y(Ne,{modelValue:h.value,"onUpdate:modelValue":w[1]||(w[1]=b=>h.value=b),outlined:"",dense:"",options:_,"transition-show":"jump-up","transition-hide":"jump-up"},{before:F(()=>[io]),prepend:F(()=>[so]),append:F(()=>[uo]),after:F(()=>[Ee(Y(A,{flat:"",icon:"done",color:"primary",onClick:re},null,512),[[Fe]])]),_:1},8,["modelValue"]),Y(Ne,{modelValue:f.value,"onUpdate:modelValue":w[2]||(w[2]=b=>f.value=b),outlined:"",dense:"",options:_,"transition-show":"jump-up","transition-hide":"jump-up"},{before:F(()=>[co]),prepend:F(()=>[vo]),append:F(()=>[fo]),after:F(()=>[Ee(Y(A,{flat:"",icon:"done",color:"primary",onClick:$},null,512),[[Fe]])]),_:1},8,["modelValue"])])]),_:1})]),_:1})]),_:1})])]),_:1},8,["modelValue","landscape","events","color","event-color"])])]),Q("div",mo,[Y(da,{modelValue:y.logger,"onUpdate:modelValue":w[4]||(w[4]=b=>y.logger=b),outlined:"",type:"textarea",autogrow:"",class:"q-py-md",placeholder:"\u8BB0\u5F55\u70B9\u4E8B\u60C5\u5427...",onFocus:w[5]||(w[5]=b=>n.value=!0),onBlur:w[6]||(w[6]=b=>n.value=!1)},{prepend:F(()=>[Y(Ue,{name:n.value?"tips_and_updates":"lightbulb",color:n.value?"orange":"grey"},null,8,["name","color"])]),append:F(()=>[Y(A,{round:"",dense:"",flat:"",icon:"send",color:"primary",onClick:p})]),_:1},8,["modelValue"]),L.value?je("",!0):(be(),ut("div",ho,[Y(Ue,{name:"psychology_alt",size:"150px",color:"primary"})])),Y(za,{modelValue:s.value,"onUpdate:modelValue":w[8]||(w[8]=b=>s.value=b),animated:"","transition-prev":"jump-up","transition-next":"jump-up"},{default:F(()=>[(be(!0),ut(fa,null,va(u.value,(b,W)=>(be(),De(La,{key:b._id,item:b,index:W,name:b.date,class:"q-pa-none"},{default:F(()=>[Q("form",go,[Q("div",yo,[Q("div",po,ma(b.date),1),Y(ba),M.value?(be(),De(A,{key:0,label:"\u4FEE \u6539",class:"q-px-md",color:"primary",disable:B.value,onClick:R=>H(b._id,b.logger,b.date,W)},null,8,["disable","onClick"])):je("",!0),M.value?(be(),De(A,{key:1,label:"\u53D6 \u6D88",class:"q-px-md",color:"grey",onClick:R=>U(W)},null,8,["onClick"])):je("",!0)]),Y(Xa,{modelValue:b.logger,"onUpdate:modelValue":R=>b.logger=R,dense:x.$q.screen.lt.md,readonly:S.value,toolbar:[["fullscreen"],[{label:"\u529F\u80FD",size:"lg",icon:"filter_2",fixedLabel:!0,list:"only-icons",options:["left","center","right","justify","bold","italic","strike","quote","underline","unordered","ordered","outdent","indent","print","hr","link","undo","redo"]}],[{label:"\u5B57\u4F53\u5927\u5C0F",icon:x.$q.iconSet.editor.fontSize,fixedLabel:!0,size:"md",fixedIcon:!0,list:"no-icons",options:["size-1","size-2","size-3","size-4","size-5","size-6","size-7"]},"removeFormat"],["viewsource"],["edit"]],fonts:{arial:"Arial",arial_black:"Arial Black",comic_sans:"Comic Sans MS",courier_new:"Courier New",impact:"Impact",lucida_grande:"Lucida Grande",times_new_roman:"Times New Roman",verdana:"Verdana"},onInput:R=>ae(W)},{edit:F(()=>[Y(A,{icon:"edit",color:"primary",size:"sm",flat:"",padding:"none",onClick:w[7]||(w[7]=R=>S.value=!1)})]),_:2},1032,["modelValue","onUpdate:modelValue","dense","readonly","toolbar","onInput"])])]),_:2},1032,["item","index","name"]))),128))]),_:1},8,["modelValue"])])])]),_:1}))}};export{Po as default};
