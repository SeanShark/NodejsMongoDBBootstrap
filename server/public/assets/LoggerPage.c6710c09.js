import{a as y,c as Ye,bj as Rt,f as yt,k as pt,br as At,r as P,b5 as It,w as le,d,aL as Ce,x as Ue,g as Qe,bs as Vt,s as Ae,Q,Y as Yt,u as Ut,aE as Qt,j as Wt,aA as Kt,m as Jt,aF as Gt,n as Xt,aG as Zt,o as Ie,a4 as lt,$ as it,a6 as ea,a5 as bt,a2 as ta,ax as wt,a1 as rt,S as Ve,bt as aa,q as Ct,aN as oa,D as na,J as be,O as De,M as A,P as V,L as I,N as la,am as ia,K as st,U as $e,an as ra,ao as sa,aq as ua,b8 as Be,t as ca,bb as da,R as va}from"./index.64fbb36d.js";import{d as fa}from"./use-panel.e739671b.js";import{p as ge,t as ma,a as ut,f as ha,e as ga,j as je,_ as ya,c as ct,u as pa}from"./store.c7c05c6b.js";import{Q as ba}from"./QSpace.76bb1bae.js";import{Q as wa}from"./QBtnDropdown.9d7fd7e3.js";import{u as Ca,v as dt,b as ka,p as vt,c as _a,d as xa,r as ft,s as Sa,e as qa,C as Ta}from"./ClosePopup.f356d75e.js";import{a as mt,Q as Da}from"./QItem.57c62657.js";import{b as Ha,d as Oa,e as Pa,Q as Ee}from"./use-fullscreen.96dc9565.js";import{Q as za,a as Ma}from"./QTabPanels.41094a35.js";import{Q as La}from"./QPage.5de54236.js";import"./axios.7331a07d.js";import"./rtl.b51694b1.js";const $a=["gregorian","persian"],Ba={modelValue:{required:!0},mask:{type:String},locale:Object,calendar:{type:String,validator:e=>$a.includes(e),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},ja=["update:modelValue"];function de(e){return e.year+"/"+ge(e.month)+"/"+ge(e.day)}function Ea(e,a){const n=y(()=>e.disable!==!0&&e.readonly!==!0),s=y(()=>n.value===!0?0:-1),u=y(()=>{const w=[];return e.color!==void 0&&w.push(`bg-${e.color}`),e.textColor!==void 0&&w.push(`text-${e.textColor}`),w.join(" ")});function k(){return e.locale!==void 0?{...a.lang.date,...e.locale}:a.lang.date}function f(w){const S=new Date,M=w===!0?null:0;if(e.calendar==="persian"){const x=ma(S);return{year:x.jy,month:x.jm,day:x.jd}}return{year:S.getFullYear(),month:S.getMonth()+1,day:S.getDate(),hour:M,minute:M,second:M,millisecond:M}}return{editable:n,tabindex:s,headerClass:u,getLocale:k,getCurrentDate:f}}const he=20,Na=["Calendar","Years","Months"],ht=e=>Na.includes(e),Ne=e=>/^-?[\d]+\/[0-1]\d$/.test(e),we=" \u2014 ";function ve(e){return e.year+"/"+ge(e.month)}var Fa=Ye({name:"QDate",props:{...Ba,...Rt,...yt,multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:Ne},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:Ne},navigationMaxYearMonth:{type:String,validator:Ne},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:ht}},emits:[...ja,"rangeStart","rangeEnd","navigation"],setup(e,{slots:a,emit:n}){const{proxy:s}=Qe(),{$q:u}=s,k=pt(e,u),{getCache:f}=fa(),{tabindex:w,headerClass:S,getLocale:M,getCurrentDate:x}=Ea(e,u);let N;const O=At(e),L=Vt(O),W=P(null),R=P(Xe()),z=P(M()),K=y(()=>Xe()),Z=y(()=>M()),_=y(()=>x()),p=P(Ze(R.value,z.value)),q=P(e.defaultView),ie=u.lang.rtl===!0?"right":"left",$=P(ie.value),re=P(ie.value),ee=p.value.year,te=P(ee-ee%he-(ee<0?he:0)),b=P(null),h=y(()=>{const t=e.landscape===!0?"landscape":"portrait";return`q-date q-date--${t} q-date--${t}-${e.minimal===!0?"minimal":"standard"}`+(k.value===!0?" q-date--dark q-dark":"")+(e.bordered===!0?" q-date--bordered":"")+(e.square===!0?" q-date--square no-border-radius":"")+(e.flat===!0?" q-date--flat no-shadow":"")+(e.disable===!0?" disabled":e.readonly===!0?" q-date--readonly":"")}),g=y(()=>e.color||"primary"),B=y(()=>e.textColor||"white"),Y=y(()=>e.emitImmediately===!0&&e.multiple!==!0&&e.range!==!0),G=y(()=>Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue!==null&&e.modelValue!==void 0?[e.modelValue]:[]),J=y(()=>G.value.filter(t=>typeof t=="string").map(t=>Oe(t,R.value,z.value)).filter(t=>t.dateHash!==null&&t.day!==null&&t.month!==null&&t.year!==null)),oe=y(()=>{const t=o=>Oe(o,R.value,z.value);return G.value.filter(o=>It(o)===!0&&o.from!==void 0&&o.to!==void 0).map(o=>({from:t(o.from),to:t(o.to)})).filter(o=>o.from.dateHash!==null&&o.to.dateHash!==null&&o.from.dateHash<o.to.dateHash)}),ue=y(()=>e.calendar!=="persian"?t=>new Date(t.year,t.month-1,t.day):t=>{const o=ut(t.year,t.month,t.day);return new Date(o.gy,o.gm-1,o.gd)}),ce=y(()=>e.calendar==="persian"?de:(t,o,l)=>ha(new Date(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),o===void 0?R.value:o,l===void 0?z.value:l,t.year,t.timezoneOffset)),ne=y(()=>J.value.length+oe.value.reduce((t,o)=>t+1+ga(ue.value(o.to),ue.value(o.from)),0)),fe=y(()=>{if(e.title!==void 0&&e.title!==null&&e.title.length!==0)return e.title;if(b.value!==null){const l=b.value.init,v=ue.value(l);return z.value.daysShort[v.getDay()]+", "+z.value.monthsShort[l.month-1]+" "+l.day+we+"?"}if(ne.value===0)return we;if(ne.value>1)return`${ne.value} ${z.value.pluralDay}`;const t=J.value[0],o=ue.value(t);return isNaN(o.valueOf())===!0?we:z.value.headerTitle!==void 0?z.value.headerTitle(o,t):z.value.daysShort[o.getDay()]+", "+z.value.monthsShort[t.month-1]+" "+t.day}),F=y(()=>J.value.concat(oe.value.map(o=>o.from)).sort((o,l)=>o.year-l.year||o.month-l.month)[0]),se=y(()=>J.value.concat(oe.value.map(o=>o.to)).sort((o,l)=>l.year-o.year||l.month-o.month)[0]),U=y(()=>{if(e.subtitle!==void 0&&e.subtitle!==null&&e.subtitle.length!==0)return e.subtitle;if(ne.value===0)return we;if(ne.value>1){const t=F.value,o=se.value,l=z.value.monthsShort;return l[t.month-1]+(t.year!==o.year?" "+t.year+we+l[o.month-1]+" ":t.month!==o.month?we+l[o.month-1]:"")+" "+o.year}return J.value[0].year}),ae=y(()=>{const t=[u.iconSet.datetime.arrowLeft,u.iconSet.datetime.arrowRight];return u.lang.rtl===!0?t.reverse():t}),Se=y(()=>e.firstDayOfWeek!==void 0?Number(e.firstDayOfWeek):z.value.firstDayOfWeek),i=y(()=>{const t=z.value.daysShort,o=Se.value;return o>0?t.slice(o,7).concat(t.slice(0,o)):t}),r=y(()=>{const t=p.value;return e.calendar!=="persian"?new Date(t.year,t.month,0).getDate():je(t.year,t.month)}),D=y(()=>typeof e.eventColor=="function"?e.eventColor:()=>e.eventColor),T=y(()=>{if(e.navigationMinYearMonth===void 0)return null;const t=e.navigationMinYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),E=y(()=>{if(e.navigationMaxYearMonth===void 0)return null;const t=e.navigationMaxYearMonth.split("/");return{year:parseInt(t[0],10),month:parseInt(t[1],10)}}),ke=y(()=>{const t={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return T.value!==null&&T.value.year>=p.value.year&&(t.year.prev=!1,T.value.year===p.value.year&&T.value.month>=p.value.month&&(t.month.prev=!1)),E.value!==null&&E.value.year<=p.value.year&&(t.year.next=!1,E.value.year===p.value.year&&E.value.month<=p.value.month&&(t.month.next=!1)),t}),qe=y(()=>{const t={};return J.value.forEach(o=>{const l=ve(o);t[l]===void 0&&(t[l]=[]),t[l].push(o.day)}),t}),Ke=y(()=>{const t={};return oe.value.forEach(o=>{const l=ve(o.from),v=ve(o.to);if(t[l]===void 0&&(t[l]=[]),t[l].push({from:o.from.day,to:l===v?o.to.day:void 0,range:o}),l<v){let c;const{year:H,month:m}=o.from,C=m<12?{year:H,month:m+1}:{year:H+1,month:1};for(;(c=ve(C))<=v;)t[c]===void 0&&(t[c]=[]),t[c].push({from:void 0,to:c===v?o.to.day:void 0,range:o}),C.month++,C.month>12&&(C.year++,C.month=1)}}),t}),_e=y(()=>{if(b.value===null)return;const{init:t,initHash:o,final:l,finalHash:v}=b.value,[c,H]=o<=v?[t,l]:[l,t],m=ve(c),C=ve(H);if(m!==X.value&&C!==X.value)return;const j={};return m===X.value?(j.from=c.day,j.includeFrom=!0):j.from=1,C===X.value?(j.to=H.day,j.includeTo=!0):j.to=r.value,j}),X=y(()=>ve(p.value)),Tt=y(()=>{const t={};if(e.options===void 0){for(let l=1;l<=r.value;l++)t[l]=!0;return t}const o=typeof e.options=="function"?e.options:l=>e.options.includes(l);for(let l=1;l<=r.value;l++){const v=X.value+"/"+ge(l);t[l]=o(v)}return t}),Dt=y(()=>{const t={};if(e.events===void 0)for(let o=1;o<=r.value;o++)t[o]=!1;else{const o=typeof e.events=="function"?e.events:l=>e.events.includes(l);for(let l=1;l<=r.value;l++){const v=X.value+"/"+ge(l);t[l]=o(v)===!0&&D.value(v)}}return t}),Ht=y(()=>{let t,o;const{year:l,month:v}=p.value;if(e.calendar!=="persian")t=new Date(l,v-1,1),o=new Date(l,v-1,0).getDate();else{const c=ut(l,v,1);t=new Date(c.gy,c.gm-1,c.gd);let H=v-1,m=l;H===0&&(H=12,m--),o=je(m,H)}return{days:t.getDay()-Se.value-1,endDay:o}}),Je=y(()=>{const t=[],{days:o,endDay:l}=Ht.value,v=o<0?o+7:o;if(v<6)for(let m=l-v;m<=l;m++)t.push({i:m,fill:!0});const c=t.length;for(let m=1;m<=r.value;m++){const C={i:m,event:Dt.value[m],classes:[]};Tt.value[m]===!0&&(C.in=!0,C.flat=!0),t.push(C)}if(qe.value[X.value]!==void 0&&qe.value[X.value].forEach(m=>{const C=c+m-1;Object.assign(t[C],{selected:!0,unelevated:!0,flat:!1,color:g.value,textColor:B.value})}),Ke.value[X.value]!==void 0&&Ke.value[X.value].forEach(m=>{if(m.from!==void 0){const C=c+m.from-1,j=c+(m.to||r.value)-1;for(let xe=C;xe<=j;xe++)Object.assign(t[xe],{range:m.range,unelevated:!0,color:g.value,textColor:B.value});Object.assign(t[C],{rangeFrom:!0,flat:!1}),m.to!==void 0&&Object.assign(t[j],{rangeTo:!0,flat:!1})}else if(m.to!==void 0){const C=c+m.to-1;for(let j=c;j<=C;j++)Object.assign(t[j],{range:m.range,unelevated:!0,color:g.value,textColor:B.value});Object.assign(t[C],{flat:!1,rangeTo:!0})}else{const C=c+r.value-1;for(let j=c;j<=C;j++)Object.assign(t[j],{range:m.range,unelevated:!0,color:g.value,textColor:B.value})}}),_e.value!==void 0){const m=c+_e.value.from-1,C=c+_e.value.to-1;for(let j=m;j<=C;j++)t[j].color=g.value,t[j].editRange=!0;_e.value.includeFrom===!0&&(t[m].editRangeFrom=!0),_e.value.includeTo===!0&&(t[C].editRangeTo=!0)}p.value.year===_.value.year&&p.value.month===_.value.month&&(t[c+_.value.day-1].today=!0);const H=t.length%7;if(H>0){const m=7-H;for(let C=1;C<=m;C++)t.push({i:C,fill:!0})}return t.forEach(m=>{let C="q-date__calendar-item ";m.fill===!0?C+="q-date__calendar-item--fill":(C+=`q-date__calendar-item--${m.in===!0?"in":"out"}`,m.range!==void 0&&(C+=` q-date__range${m.rangeTo===!0?"-to":m.rangeFrom===!0?"-from":""}`),m.editRange===!0&&(C+=` q-date__edit-range${m.editRangeFrom===!0?"-from":""}${m.editRangeTo===!0?"-to":""}`),(m.range!==void 0||m.editRange===!0)&&(C+=` text-${m.color}`)),m.classes=C}),t}),Ot=y(()=>e.disable===!0?{"aria-disabled":"true"}:e.readonly===!0?{"aria-readonly":"true"}:{});le(()=>e.modelValue,t=>{if(N===t)N=0;else{const o=Ze(R.value,z.value);ye(o.year,o.month,o)}}),le(q,()=>{W.value!==null&&s.$el.contains(document.activeElement)===!0&&W.value.focus()}),le(()=>p.value.year+"|"+p.value.month,()=>{n("navigation",{year:p.value.year,month:p.value.month})}),le(K,t=>{nt(t,z.value,"mask"),R.value=t}),le(Z,t=>{nt(R.value,t,"locale"),z.value=t});function Ge(){const t=_.value,o=qe.value[ve(t)];(o===void 0||o.includes(t.day)===!1)&&ze(t),He(t.year,t.month)}function Pt(t){ht(t)===!0&&(q.value=t)}function zt(t,o){["month","year"].includes(t)&&(t==="month"?tt:Pe)(o===!0?-1:1)}function He(t,o){q.value="Calendar",ye(t,o)}function Mt(t,o){if(e.range===!1||!t){b.value=null;return}const l=Object.assign({...p.value},t),v=o!==void 0?Object.assign({...p.value},o):l;b.value={init:l,initHash:de(l),final:v,finalHash:de(v)},He(l.year,l.month)}function Xe(){return e.calendar==="persian"?"YYYY/MM/DD":e.mask}function Oe(t,o,l){return ya(t,o,l,e.calendar,{hour:0,minute:0,second:0,millisecond:0})}function Ze(t,o){const l=Array.isArray(e.modelValue)===!0?e.modelValue:e.modelValue?[e.modelValue]:[];if(l.length===0)return et();const v=l[l.length-1],c=Oe(v.from!==void 0?v.from:v,t,o);return c.dateHash===null?et():c}function et(){let t,o;if(e.defaultYearMonth!==void 0){const l=e.defaultYearMonth.split("/");t=parseInt(l[0],10),o=parseInt(l[1],10)}else{const l=_.value!==void 0?_.value:x();t=l.year,o=l.month}return{year:t,month:o,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:t+"/"+ge(o)+"/01"}}function tt(t){let o=p.value.year,l=Number(p.value.month)+t;l===13?(l=1,o++):l===0&&(l=12,o--),ye(o,l),Y.value===!0&&Te("month")}function Pe(t){const o=Number(p.value.year)+t;ye(o,p.value.month),Y.value===!0&&Te("year")}function Lt(t){ye(t,p.value.month),q.value=e.defaultView==="Years"?"Months":"Calendar",Y.value===!0&&Te("year")}function $t(t){ye(p.value.year,t),q.value="Calendar",Y.value===!0&&Te("month")}function Bt(t,o){const l=qe.value[o];(l!==void 0&&l.includes(t.day)===!0?Me:ze)(t)}function me(t){return{year:t.year,month:t.month,day:t.day}}function ye(t,o,l){if(T.value!==null&&t<=T.value.year&&(t=T.value.year,o<T.value.month&&(o=T.value.month)),E.value!==null&&t>=E.value.year&&(t=E.value.year,o>E.value.month&&(o=E.value.month)),l!==void 0){const{hour:c,minute:H,second:m,millisecond:C,timezoneOffset:j,timeHash:xe}=l;Object.assign(p.value,{hour:c,minute:H,second:m,millisecond:C,timezoneOffset:j,timeHash:xe})}const v=t+"/"+ge(o)+"/01";v!==p.value.dateHash&&($.value=p.value.dateHash<v==(u.lang.rtl!==!0)?"left":"right",t!==p.value.year&&(re.value=$.value),Ae(()=>{te.value=t-t%he-(t<0?he:0),Object.assign(p.value,{year:t,month:o,day:1,dateHash:v})}))}function at(t,o,l){const v=t!==null&&t.length===1&&e.multiple===!1?t[0]:t;N=v;const{reason:c,details:H}=ot(o,l);n("update:modelValue",v,c,H)}function Te(t){const o=J.value[0]!==void 0&&J.value[0].dateHash!==null?{...J.value[0]}:{...p.value};Ae(()=>{o.year=p.value.year,o.month=p.value.month;const l=e.calendar!=="persian"?new Date(o.year,o.month,0).getDate():je(o.year,o.month);o.day=Math.min(Math.max(1,o.day),l);const v=pe(o);N=v;const{details:c}=ot("",o);n("update:modelValue",v,t,c)})}function ot(t,o){return o.from!==void 0?{reason:`${t}-range`,details:{...me(o.target),from:me(o.from),to:me(o.to)}}:{reason:`${t}-day`,details:me(o)}}function pe(t,o,l){return t.from!==void 0?{from:ce.value(t.from,o,l),to:ce.value(t.to,o,l)}:ce.value(t,o,l)}function ze(t){let o;if(e.multiple===!0)if(t.from!==void 0){const l=de(t.from),v=de(t.to),c=J.value.filter(m=>m.dateHash<l||m.dateHash>v),H=oe.value.filter(({from:m,to:C})=>C.dateHash<l||m.dateHash>v);o=c.concat(H).concat(t).map(m=>pe(m))}else{const l=G.value.slice();l.push(pe(t)),o=l}else o=pe(t);at(o,"add",t)}function Me(t){if(e.noUnset===!0)return;let o=null;if(e.multiple===!0&&Array.isArray(e.modelValue)===!0){const l=pe(t);t.from!==void 0?o=e.modelValue.filter(v=>v.from!==void 0?v.from!==l.from&&v.to!==l.to:!0):o=e.modelValue.filter(v=>v!==l),o.length===0&&(o=null)}at(o,"remove",t)}function nt(t,o,l){const v=J.value.concat(oe.value).map(c=>pe(c,t,o)).filter(c=>c.from!==void 0?c.from.dateHash!==null&&c.to.dateHash!==null:c.dateHash!==null);n("update:modelValue",(e.multiple===!0?v:v[0])||null,l)}function jt(){if(e.minimal!==!0)return d("div",{class:"q-date__header "+S.value},[d("div",{class:"relative-position"},[d(Ce,{name:"q-transition--fade"},()=>d("div",{key:"h-yr-"+U.value,class:"q-date__header-subtitle q-date__header-link "+(q.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:w.value,...f("vY",{onClick(){q.value="Years"},onKeyup(t){t.keyCode===13&&(q.value="Years")}})},[U.value]))]),d("div",{class:"q-date__header-title relative-position flex no-wrap"},[d("div",{class:"relative-position col"},[d(Ce,{name:"q-transition--fade"},()=>d("div",{key:"h-sub"+fe.value,class:"q-date__header-title-label q-date__header-link "+(q.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:w.value,...f("vC",{onClick(){q.value="Calendar"},onKeyup(t){t.keyCode===13&&(q.value="Calendar")}})},[fe.value]))]),e.todayBtn===!0?d(Q,{class:"q-date__header-today self-start",icon:u.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:w.value,onClick:Ge}):null])])}function Le({label:t,type:o,key:l,dir:v,goTo:c,boundaries:H,cls:m}){return[d("div",{class:"row items-center q-date__arrow"},[d(Q,{round:!0,dense:!0,size:"sm",flat:!0,icon:ae.value[0],tabindex:w.value,disable:H.prev===!1,...f("go-#"+o,{onClick(){c(-1)}})})]),d("div",{class:"relative-position overflow-hidden flex flex-center"+m},[d(Ce,{name:"q-transition--jump-"+v},()=>d("div",{key:l},[d(Q,{flat:!0,dense:!0,noCaps:!0,label:t,tabindex:w.value,...f("view#"+o,{onClick:()=>{q.value=o}})})]))]),d("div",{class:"row items-center q-date__arrow"},[d(Q,{round:!0,dense:!0,size:"sm",flat:!0,icon:ae.value[1],tabindex:w.value,disable:H.next===!1,...f("go+#"+o,{onClick(){c(1)}})})])]}const Et={Calendar:()=>[d("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[d("div",{class:"q-date__navigation row items-center no-wrap"},Le({label:z.value.months[p.value.month-1],type:"Months",key:p.value.month,dir:$.value,goTo:tt,boundaries:ke.value.month,cls:" col"}).concat(Le({label:p.value.year,type:"Years",key:p.value.year,dir:re.value,goTo:Pe,boundaries:ke.value.year,cls:""}))),d("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},i.value.map(t=>d("div",{class:"q-date__calendar-item"},[d("div",t)]))),d("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[d(Ce,{name:"q-transition--slide-"+$.value},()=>d("div",{key:X.value,class:"q-date__calendar-days fit"},Je.value.map(t=>d("div",{class:t.classes},[t.in===!0?d(Q,{class:t.today===!0?"q-date__today":"",dense:!0,flat:t.flat,unelevated:t.unelevated,color:t.color,textColor:t.textColor,label:t.i,tabindex:w.value,...f("day#"+t.i,{onClick:()=>{Nt(t.i)},onMouseover:()=>{Ft(t.i)}})},t.event!==!1?()=>d("div",{class:"q-date__event bg-"+t.event}):null):d("div",""+t.i)]))))])])],Months(){const t=p.value.year===_.value.year,o=v=>T.value!==null&&p.value.year===T.value.year&&T.value.month>v||E.value!==null&&p.value.year===E.value.year&&E.value.month<v,l=z.value.monthsShort.map((v,c)=>{const H=p.value.month===c+1;return d("div",{class:"q-date__months-item flex flex-center"},[d(Q,{class:t===!0&&_.value.month===c+1?"q-date__today":null,flat:H!==!0,label:v,unelevated:H,color:H===!0?g.value:null,textColor:H===!0?B.value:null,tabindex:w.value,disable:o(c+1),...f("month#"+c,{onClick:()=>{$t(c+1)}})})])});return e.yearsInMonthView===!0&&l.unshift(d("div",{class:"row no-wrap full-width"},[Le({label:p.value.year,type:"Years",key:p.value.year,dir:re.value,goTo:Pe,boundaries:ke.value.year,cls:" col"})])),d("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},l)},Years(){const t=te.value,o=t+he,l=[],v=c=>T.value!==null&&T.value.year>c||E.value!==null&&E.value.year<c;for(let c=t;c<=o;c++){const H=p.value.year===c;l.push(d("div",{class:"q-date__years-item flex flex-center"},[d(Q,{key:"yr"+c,class:_.value.year===c?"q-date__today":null,flat:!H,label:c,dense:!0,unelevated:H,color:H===!0?g.value:null,textColor:H===!0?B.value:null,tabindex:w.value,disable:v(c),...f("yr#"+c,{onClick:()=>{Lt(c)}})})]))}return d("div",{class:"q-date__view q-date__years flex flex-center"},[d("div",{class:"col-auto"},[d(Q,{round:!0,dense:!0,flat:!0,icon:ae.value[0],tabindex:w.value,disable:v(t),...f("y-",{onClick:()=>{te.value-=he}})})]),d("div",{class:"q-date__years-content col self-stretch row items-center"},l),d("div",{class:"col-auto"},[d(Q,{round:!0,dense:!0,flat:!0,icon:ae.value[1],tabindex:w.value,disable:v(o),...f("y+",{onClick:()=>{te.value+=he}})})])])}};function Nt(t){const o={...p.value,day:t};if(e.range===!1){Bt(o,X.value);return}if(b.value===null){const l=Je.value.find(c=>c.fill!==!0&&c.i===t);if(e.noUnset!==!0&&l.range!==void 0){Me({target:o,from:l.range.from,to:l.range.to});return}if(l.selected===!0){Me(o);return}const v=de(o);b.value={init:o,initHash:v,final:o,finalHash:v},n("rangeStart",me(o))}else{const l=b.value.initHash,v=de(o),c=l<=v?{from:b.value.init,to:o}:{from:o,to:b.value.init};b.value=null,ze(l===v?o:{target:o,...c}),n("rangeEnd",{from:me(c.from),to:me(c.to)})}}function Ft(t){if(b.value!==null){const o={...p.value,day:t};Object.assign(b.value,{final:o,finalHash:de(o)})}}return Object.assign(s,{setToday:Ge,setView:Pt,offsetCalendar:zt,setCalendarTo:He,setEditingRange:Mt}),()=>{const t=[d("div",{class:"q-date__content col relative-position"},[d(Ce,{name:"q-transition--fade"},Et[q.value])])],o=Ue(a.default);return o!==void 0&&t.push(d("div",{class:"q-date__actions"},o)),e.name!==void 0&&e.disable!==!0&&L(t,"push"),d("div",{class:h.value,...Ot.value},[jt(),d("div",{ref:W,class:"q-date__main col column",tabindex:-1},t)])}}});function kt(e,a){if(a&&e===a)return null;const n=e.nodeName.toLowerCase();if(["div","li","ul","ol","blockquote"].includes(n)===!0)return e;const s=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,u=s.display;return u==="block"||u==="table"?e:kt(e.parentNode)}function Fe(e,a,n){return!e||e===document.body?!1:n===!0&&e===a||(a===document?document.body:a).contains(e.parentNode)}function _t(e,a,n){if(n||(n=document.createRange(),n.selectNode(e),n.setStart(e,0)),a.count===0)n.setEnd(e,a.count);else if(a.count>0)if(e.nodeType===Node.TEXT_NODE)e.textContent.length<a.count?a.count-=e.textContent.length:(n.setEnd(e,a.count),a.count=0);else for(let s=0;a.count!==0&&s<e.childNodes.length;s++)n=_t(e.childNodes[s],a,n);return n}const Ra=/^https?:\/\//;class Aa{constructor(a,n){this.el=a,this.eVm=n,this._range=null}get selection(){if(this.el){const a=document.getSelection();if(Fe(a.anchorNode,this.el,!0)&&Fe(a.focusNode,this.el,!0))return a}return null}get hasSelection(){return this.selection!==null?this.selection.toString().length!==0:!1}get range(){const a=this.selection;return a!==null&&a.rangeCount?a.getRangeAt(0):this._range}get parent(){const a=this.range;if(a!==null){const n=a.startContainer;return n.nodeType===document.ELEMENT_NODE?n:n.parentNode}return null}get blockParent(){const a=this.parent;return a!==null?kt(a,this.el):null}save(a=this.range){a!==null&&(this._range=a)}restore(a=this._range){const n=document.createRange(),s=document.getSelection();a!==null?(n.setStart(a.startContainer,a.startOffset),n.setEnd(a.endContainer,a.endOffset),s.removeAllRanges(),s.addRange(n)):(s.selectAllChildren(this.el),s.collapseToEnd())}savePosition(){let a=-1,n;const s=document.getSelection(),u=this.el.parentNode;if(s.focusNode&&Fe(s.focusNode,u))for(n=s.focusNode,a=s.focusOffset;n&&n!==u;)n!==this.el&&n.previousSibling?(n=n.previousSibling,a+=n.textContent.length):n=n.parentNode;this.savedPos=a}restorePosition(a=0){if(this.savedPos>0&&this.savedPos<a){const n=window.getSelection(),s=_t(this.el,{count:this.savedPos});s&&(s.collapse(!1),n.removeAllRanges(),n.addRange(s))}}hasParent(a,n){const s=n?this.parent:this.blockParent;return s!==null?s.nodeName.toLowerCase()===a.toLowerCase():!1}hasParents(a,n,s=this.parent){return s===null?!1:a.includes(s.nodeName.toLowerCase())===!0?!0:n===!0?this.hasParents(a,n,s.parentNode):!1}is(a,n){if(this.selection===null)return!1;switch(a){case"formatBlock":return n==="DIV"&&this.parent===this.el||this.hasParent(n,n==="PRE");case"link":return this.hasParent("A",!0);case"fontSize":return document.queryCommandValue(a)===n;case"fontName":const s=document.queryCommandValue(a);return s===`"${n}"`||s===n;case"fullscreen":return this.eVm.inFullscreen.value;case"viewsource":return this.eVm.isViewingSource.value;case void 0:return!1;default:const u=document.queryCommandState(a);return n!==void 0?u===n:u}}getParentAttribute(a){return this.parent!==null?this.parent.getAttribute(a):null}can(a){if(a==="outdent")return this.hasParents(["blockquote","li"],!0);if(a==="indent")return this.hasParents(["li"],!0);if(a==="link")return this.selection!==null||this.is("link")}apply(a,n,s=Yt){if(a==="formatBlock")["BLOCKQUOTE","H1","H2","H3","H4","H5","H6"].includes(n)&&this.is(a,n)&&(a="outdent",n=null),n==="PRE"&&this.is(a,"PRE")&&(n="P");else if(a==="print"){s();const u=window.open();u.document.write(`
        <!doctype html>
        <html>
          <head>
            <title>Print - ${document.title}</title>
          </head>
          <body>
            <div>${this.el.innerHTML}</div>
          </body>
        </html>
      `),u.print(),u.close();return}else if(a==="link"){const u=this.getParentAttribute("href");if(u===null){const k=this.selectWord(this.selection),f=k?k.toString():"";if(!f.length&&(!this.range||!this.range.cloneContents().querySelector("img")))return;this.eVm.editLinkUrl.value=Ra.test(f)?f:"https://",document.execCommand("createLink",!1,this.eVm.editLinkUrl.value),this.save(k.getRangeAt(0))}else this.eVm.editLinkUrl.value=u,this.range.selectNodeContents(this.parent),this.save();return}else if(a==="fullscreen"){this.eVm.toggleFullscreen(),s();return}else if(a==="viewsource"){this.eVm.isViewingSource.value=this.eVm.isViewingSource.value===!1,this.eVm.setContent(this.eVm.props.modelValue),s();return}document.execCommand(a,!1,n),s()}selectWord(a){if(a===null||a.isCollapsed!==!0||a.modify===void 0)return a;const n=document.createRange();n.setStart(a.anchorNode,a.anchorOffset),n.setEnd(a.focusNode,a.focusOffset);const s=n.collapsed?["backward","forward"]:["forward","backward"];n.detach();const u=a.focusNode,k=a.focusOffset;return a.collapse(a.anchorNode,a.anchorOffset),a.modify("move",s[0],"character"),a.modify("move",s[1],"word"),a.extend(u,k),a.modify("extend",s[1],"character"),a.modify("extend",s[0],"word"),a}}var Ia=Ye({name:"QTooltip",inheritAttrs:!1,props:{...Ca,...Ut,...Qt,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{default:"jump-down"},transitionHide:{default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:dt},self:{type:String,default:"top middle",validator:dt},offset:{type:Array,default:()=>[14,14],validator:ka},scrollTarget:{default:void 0},delay:{type:Number,default:0},hideDelay:{type:Number,default:0}},emits:[...Wt],setup(e,{slots:a,emit:n,attrs:s}){let u,k;const f=Qe(),{proxy:{$q:w}}=f,S=P(null),M=P(!1),x=y(()=>vt(e.anchor,w.lang.rtl)),N=y(()=>vt(e.self,w.lang.rtl)),O=y(()=>e.persistent!==!0),{registerTick:L,removeTick:W}=Kt(),{registerTimeout:R}=Jt(),{transitionProps:z,transitionStyle:K}=Gt(e),{localScrollTarget:Z,changeScrollEvent:_,unconfigureScrollTarget:p}=_a(e,ce),{anchorEl:q,canShow:ie,anchorEvents:$}=xa({showing:M,configureAnchorEl:ue}),{show:re,hide:ee}=Xt({showing:M,canShow:ie,handleShow:g,handleHide:B,hideOnRouteChange:O,processOnMount:!0});Object.assign($,{delayShow:J,delayHide:oe});const{showPortal:te,hidePortal:b,renderPortal:h}=Zt(f,S,fe,"tooltip");if(w.platform.is.mobile===!0){const F={anchorEl:q,innerRef:S,onClickOutside(U){return ee(U),U.target.classList.contains("q-dialog__backdrop")&&bt(U),!0}},se=y(()=>e.modelValue===null&&e.persistent!==!0&&M.value===!0);le(se,U=>{(U===!0?qa:ft)(F)}),Ie(()=>{ft(F)})}function g(F){te(),L(()=>{k=new MutationObserver(()=>G()),k.observe(S.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),G(),ce()}),u===void 0&&(u=le(()=>w.screen.width+"|"+w.screen.height+"|"+e.self+"|"+e.anchor+"|"+w.lang.rtl,G)),R(()=>{te(!0),n("show",F)},e.transitionDuration)}function B(F){W(),b(),Y(),R(()=>{b(!0),n("hide",F)},e.transitionDuration)}function Y(){k!==void 0&&(k.disconnect(),k=void 0),u!==void 0&&(u(),u=void 0),p(),lt($,"tooltipTemp")}function G(){const F=S.value;q.value===null||!F||Sa({el:F,offset:e.offset,anchorEl:q.value,anchorOrigin:x.value,selfOrigin:N.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function J(F){if(w.platform.is.mobile===!0){ct(),document.body.classList.add("non-selectable");const se=q.value,U=["touchmove","touchcancel","touchend","click"].map(ae=>[se,ae,"delayHide","passiveCapture"]);it($,"tooltipTemp",U)}R(()=>{re(F)},e.delay)}function oe(F){w.platform.is.mobile===!0&&(lt($,"tooltipTemp"),ct(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),R(()=>{ee(F)},e.hideDelay)}function ue(){if(e.noParentEvent===!0||q.value===null)return;const F=w.platform.is.mobile===!0?[[q.value,"touchstart","delayShow","passive"]]:[[q.value,"mouseenter","delayShow","passive"],[q.value,"mouseleave","delayHide","passive"]];it($,"anchor",F)}function ce(){if(q.value!==null||e.scrollTarget!==void 0){Z.value=ea(q.value,e.scrollTarget);const F=e.noParentEvent===!0?G:ee;_(Z.value,F)}}function ne(){return M.value===!0?d("div",{...s,ref:S,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",s.class],style:[s.style,K.value],role:"tooltip"},Ue(a.default)):null}function fe(){return d(Ce,z.value,ne)}return Ie(Y),Object.assign(f.proxy,{updatePosition:G}),h}});function xt(e,a,n){a.handler?a.handler(e,n,n.caret):n.runCmd(a.cmd,a.param)}function We(e){return d("div",{class:"q-editor__toolbar-group"},e)}function St(e,a,n,s=!1){const u=s||(a.type==="toggle"?a.toggled?a.toggled(e):a.cmd&&e.caret.is(a.cmd,a.param):!1),k=[];if(a.tip&&e.$q.platform.is.desktop){const f=a.key?d("div",[d("small",`(CTRL + ${String.fromCharCode(a.key)})`)]):null;k.push(d(Ia,{delay:1e3},()=>[d("div",{innerHTML:a.tip}),f]))}return d(Q,{...e.buttonProps.value,icon:a.icon!==null?a.icon:void 0,color:u?a.toggleColor||e.props.toolbarToggleColor:a.color||e.props.toolbarColor,textColor:u&&!e.props.toolbarPush?null:a.textColor||e.props.toolbarTextColor,label:a.label,disable:a.disable?typeof a.disable=="function"?a.disable(e):!0:!1,size:"sm",onClick(f){n&&n(),xt(f,a,e)}},()=>k)}function Va(e,a){const n=a.list==="only-icons";let s=a.label,u=a.icon!==null?a.icon:void 0,k,f;function w(){M.component.proxy.hide()}if(n)f=a.options.map(x=>{const N=x.type===void 0?e.caret.is(x.cmd,x.param):!1;return N&&(s=x.tip,u=x.icon!==null?x.icon:void 0),St(e,x,w,N)}),k=e.toolbarBackgroundClass.value,f=[We(f)];else{const x=e.props.toolbarToggleColor!==void 0?`text-${e.props.toolbarToggleColor}`:null,N=e.props.toolbarTextColor!==void 0?`text-${e.props.toolbarTextColor}`:null,O=a.list==="no-icons";f=a.options.map(L=>{const W=L.disable?L.disable(e):!1,R=L.type===void 0?e.caret.is(L.cmd,L.param):!1;R&&(s=L.tip,u=L.icon!==null?L.icon:void 0);const z=L.htmlTip;return d(Da,{active:R,activeClass:x,clickable:!0,disable:W,dense:!0,onClick(K){w(),e.contentRef.value!==null&&e.contentRef.value.focus(),e.caret.restore(),xt(K,L,e)}},()=>[O===!0?null:d(mt,{class:R?x:N,side:!0},()=>d(Ve,{name:L.icon!==null?L.icon:void 0})),d(mt,z?()=>d("div",{class:"text-no-wrap",innerHTML:L.htmlTip}):L.tip?()=>d("div",{class:"text-no-wrap"},L.tip):void 0)])}),k=[e.toolbarBackgroundClass.value,N]}const S=a.highlight&&s!==a.label,M=d(wa,{...e.buttonProps.value,noCaps:!0,noWrap:!0,color:S?e.props.toolbarToggleColor:e.props.toolbarColor,textColor:S&&!e.props.toolbarPush?null:e.props.toolbarTextColor,label:a.fixedLabel?a.label:s,icon:a.fixedIcon?a.icon!==null?a.icon:void 0:u,contentClass:k,onShow:x=>e.emit("dropdownShow",x),onHide:x=>e.emit("dropdownHide",x),onBeforeShow:x=>e.emit("dropdownBeforeShow",x),onBeforeHide:x=>e.emit("dropdownBeforeHide",x)},()=>f);return M}function Ya(e){if(e.caret)return e.buttons.value.filter(a=>!e.isViewingSource.value||a.find(n=>n.cmd==="viewsource")).map(a=>We(a.map(n=>e.isViewingSource.value&&n.cmd!=="viewsource"?!1:n.type==="slot"?Ue(e.slots[n.slot]):n.type==="dropdown"?Va(e,n):St(e,n))))}function Ua(e,a,n,s={}){const u=Object.keys(s);if(u.length===0)return{};const k={default_font:{cmd:"fontName",param:e,icon:n,tip:a}};return u.forEach(f=>{const w=s[f];k[f]={cmd:"fontName",param:w,icon:n,tip:w,htmlTip:`<font face="${w}">${w}</font>`}}),k}function Qa(e){if(e.caret){const a=e.props.toolbarColor||e.props.toolbarTextColor;let n=e.editLinkUrl.value;const s=()=>{e.caret.restore(),n!==e.editLinkUrl.value&&document.execCommand("createLink",!1,n===""?" ":n),e.editLinkUrl.value=null};return[d("div",{class:`q-mx-xs text-${a}`},`${e.$q.lang.editor.url}: `),d("input",{key:"qedt_btm_input",class:"col q-editor__link-input",value:n,onInput:u=>{ta(u),n=u.target.value},onKeydown:u=>{if(wt(u)!==!0)switch(u.keyCode){case 13:return rt(u),s();case 27:rt(u),e.caret.restore(),(!e.editLinkUrl.value||e.editLinkUrl.value==="https://")&&document.execCommand("unlink"),e.editLinkUrl.value=null;break}}}),We([d(Q,{key:"qedt_btm_rem",tabindex:-1,...e.buttonProps.value,label:e.$q.lang.label.remove,noCaps:!0,onClick:()=>{e.caret.restore(),document.execCommand("unlink"),e.editLinkUrl.value=null}}),d(Q,{key:"qedt_btm_upd",...e.buttonProps.value,label:e.$q.lang.label.update,noCaps:!0,onClick:s})])]}}const Wa=Object.prototype.toString,Re=Object.prototype.hasOwnProperty,Ka=new Set(["Boolean","Number","String","Function","Array","Date","RegExp"].map(e=>"[object "+e+"]"));function gt(e){if(e!==Object(e)||Ka.has(Wa.call(e))===!0||e.constructor&&Re.call(e,"constructor")===!1&&Re.call(e.constructor.prototype,"isPrototypeOf")===!1)return!1;let a;for(a in e);return a===void 0||Re.call(e,a)}function qt(){let e,a,n,s,u,k,f=arguments[0]||{},w=1,S=!1;const M=arguments.length;for(typeof f=="boolean"&&(S=f,f=arguments[1]||{},w=2),Object(f)!==f&&typeof f!="function"&&(f={}),M===w&&(f=this,w--);w<M;w++)if((e=arguments[w])!==null)for(a in e)n=f[a],s=e[a],f!==s&&(S===!0&&s&&((u=Array.isArray(s))||gt(s)===!0)?(u===!0?k=Array.isArray(n)===!0?n:[]:k=gt(n)===!0?n:{},f[a]=qt(S,k,s)):s!==void 0&&(f[a]=s));return f}var Ja=Ye({name:"QEditor",props:{...yt,...Ha,modelValue:{type:String,required:!0},readonly:Boolean,disable:Boolean,minHeight:{type:String,default:"10rem"},maxHeight:String,height:String,definitions:Object,fonts:Object,placeholder:String,toolbar:{type:Array,validator:e=>e.length===0||e.every(a=>a.length),default(){return[["left","center","right","justify"],["bold","italic","underline","strike"],["undo","redo"]]}},toolbarColor:String,toolbarBg:String,toolbarTextColor:String,toolbarToggleColor:{type:String,default:"primary"},toolbarOutline:Boolean,toolbarPush:Boolean,toolbarRounded:Boolean,paragraphTag:{type:String,validator:e=>["div","p"].includes(e),default:"div"},contentStyle:Object,contentClass:[Object,Array,String],square:Boolean,flat:Boolean,dense:Boolean},emits:[...Oa,"update:modelValue","keydown","click","mouseup","keyup","touchend","focus","blur","dropdownShow","dropdownHide","dropdownBeforeShow","dropdownBeforeHide","linkShow","linkHide"],setup(e,{slots:a,emit:n,attrs:s}){const{proxy:u,vnode:k}=Qe(),{$q:f}=u,w=pt(e,f),{inFullscreen:S,toggleFullscreen:M}=Pa(),x=aa(s,k),N=P(null),O=P(null),L=P(null),W=P(!1),R=y(()=>!e.readonly&&!e.disable);let z,K,Z=e.modelValue;document.execCommand("defaultParagraphSeparator",!1,e.paragraphTag),z=window.getComputedStyle(document.body).fontFamily;const _=y(()=>e.toolbarBg?` bg-${e.toolbarBg}`:""),p=y(()=>{const i=e.toolbarOutline!==!0&&e.toolbarPush!==!0;return{type:"a",flat:i,noWrap:!0,outline:e.toolbarOutline,push:e.toolbarPush,rounded:e.toolbarRounded,dense:!0,color:e.toolbarColor,disable:!R.value,size:"sm"}}),q=y(()=>{const i=f.lang.editor,r=f.iconSet.editor;return{bold:{cmd:"bold",icon:r.bold,tip:i.bold,key:66},italic:{cmd:"italic",icon:r.italic,tip:i.italic,key:73},strike:{cmd:"strikeThrough",icon:r.strikethrough,tip:i.strikethrough,key:83},underline:{cmd:"underline",icon:r.underline,tip:i.underline,key:85},unordered:{cmd:"insertUnorderedList",icon:r.unorderedList,tip:i.unorderedList},ordered:{cmd:"insertOrderedList",icon:r.orderedList,tip:i.orderedList},subscript:{cmd:"subscript",icon:r.subscript,tip:i.subscript,htmlTip:"x<subscript>2</subscript>"},superscript:{cmd:"superscript",icon:r.superscript,tip:i.superscript,htmlTip:"x<superscript>2</superscript>"},link:{cmd:"link",disable:D=>D.caret&&!D.caret.can("link"),icon:r.hyperlink,tip:i.hyperlink,key:76},fullscreen:{cmd:"fullscreen",icon:r.toggleFullscreen,tip:i.toggleFullscreen,key:70},viewsource:{cmd:"viewsource",icon:r.viewSource,tip:i.viewSource},quote:{cmd:"formatBlock",param:"BLOCKQUOTE",icon:r.quote,tip:i.quote,key:81},left:{cmd:"justifyLeft",icon:r.left,tip:i.left},center:{cmd:"justifyCenter",icon:r.center,tip:i.center},right:{cmd:"justifyRight",icon:r.right,tip:i.right},justify:{cmd:"justifyFull",icon:r.justify,tip:i.justify},print:{type:"no-state",cmd:"print",icon:r.print,tip:i.print,key:80},outdent:{type:"no-state",disable:D=>D.caret&&!D.caret.can("outdent"),cmd:"outdent",icon:r.outdent,tip:i.outdent},indent:{type:"no-state",disable:D=>D.caret&&!D.caret.can("indent"),cmd:"indent",icon:r.indent,tip:i.indent},removeFormat:{type:"no-state",cmd:"removeFormat",icon:r.removeFormat,tip:i.removeFormat},hr:{type:"no-state",cmd:"insertHorizontalRule",icon:r.hr,tip:i.hr},undo:{type:"no-state",cmd:"undo",icon:r.undo,tip:i.undo,key:90},redo:{type:"no-state",cmd:"redo",icon:r.redo,tip:i.redo,key:89},h1:{cmd:"formatBlock",param:"H1",icon:r.heading1||r.heading,tip:i.heading1,htmlTip:`<h1 class="q-ma-none">${i.heading1}</h1>`},h2:{cmd:"formatBlock",param:"H2",icon:r.heading2||r.heading,tip:i.heading2,htmlTip:`<h2 class="q-ma-none">${i.heading2}</h2>`},h3:{cmd:"formatBlock",param:"H3",icon:r.heading3||r.heading,tip:i.heading3,htmlTip:`<h3 class="q-ma-none">${i.heading3}</h3>`},h4:{cmd:"formatBlock",param:"H4",icon:r.heading4||r.heading,tip:i.heading4,htmlTip:`<h4 class="q-ma-none">${i.heading4}</h4>`},h5:{cmd:"formatBlock",param:"H5",icon:r.heading5||r.heading,tip:i.heading5,htmlTip:`<h5 class="q-ma-none">${i.heading5}</h5>`},h6:{cmd:"formatBlock",param:"H6",icon:r.heading6||r.heading,tip:i.heading6,htmlTip:`<h6 class="q-ma-none">${i.heading6}</h6>`},p:{cmd:"formatBlock",param:e.paragraphTag,icon:r.heading,tip:i.paragraph},code:{cmd:"formatBlock",param:"PRE",icon:r.code,htmlTip:`<code>${i.code}</code>`},"size-1":{cmd:"fontSize",param:"1",icon:r.size1||r.size,tip:i.size1,htmlTip:`<font size="1">${i.size1}</font>`},"size-2":{cmd:"fontSize",param:"2",icon:r.size2||r.size,tip:i.size2,htmlTip:`<font size="2">${i.size2}</font>`},"size-3":{cmd:"fontSize",param:"3",icon:r.size3||r.size,tip:i.size3,htmlTip:`<font size="3">${i.size3}</font>`},"size-4":{cmd:"fontSize",param:"4",icon:r.size4||r.size,tip:i.size4,htmlTip:`<font size="4">${i.size4}</font>`},"size-5":{cmd:"fontSize",param:"5",icon:r.size5||r.size,tip:i.size5,htmlTip:`<font size="5">${i.size5}</font>`},"size-6":{cmd:"fontSize",param:"6",icon:r.size6||r.size,tip:i.size6,htmlTip:`<font size="6">${i.size6}</font>`},"size-7":{cmd:"fontSize",param:"7",icon:r.size7||r.size,tip:i.size7,htmlTip:`<font size="7">${i.size7}</font>`}}}),ie=y(()=>{const i=e.definitions||{},r=e.definitions||e.fonts?qt(!0,{},q.value,i,Ua(z,f.lang.editor.defaultFont,f.iconSet.editor.font,e.fonts)):q.value;return e.toolbar.map(D=>D.map(T=>{if(T.options)return{type:"dropdown",icon:T.icon,label:T.label,size:"sm",dense:!0,fixedLabel:T.fixedLabel,fixedIcon:T.fixedIcon,highlight:T.highlight,list:T.list,options:T.options.map(ke=>r[ke])};const E=r[T];return E?E.type==="no-state"||i[T]&&(E.cmd===void 0||q.value[E.cmd]&&q.value[E.cmd].type==="no-state")?E:Object.assign({type:"toggle"},E):{type:"slot",slot:T}}))}),$={$q:f,props:e,slots:a,emit:n,inFullscreen:S,toggleFullscreen:M,runCmd:se,isViewingSource:W,editLinkUrl:L,toolbarBackgroundClass:_,buttonProps:p,contentRef:O,buttons:ie,setContent:F};le(()=>e.modelValue,i=>{Z!==i&&(Z=i,F(i,!0))}),le(L,i=>{n(`link-${i?"Show":"Hide"}`)});const re=y(()=>e.toolbar&&e.toolbar.length!==0),ee=y(()=>{const i={},r=D=>{D.key&&(i[D.key]={cmd:D.cmd,param:D.param})};return ie.value.forEach(D=>{D.forEach(T=>{T.options?T.options.forEach(r):r(T)})}),i}),te=y(()=>S.value?e.contentStyle:[{minHeight:e.minHeight,height:e.height,maxHeight:e.maxHeight},e.contentStyle]),b=y(()=>`q-editor q-editor--${W.value===!0?"source":"default"}`+(e.disable===!0?" disabled":"")+(S.value===!0?" fullscreen column":"")+(e.square===!0?" q-editor--square no-border-radius":"")+(e.flat===!0?" q-editor--flat":"")+(e.dense===!0?" q-editor--dense":"")+(w.value===!0?" q-editor--dark q-dark":"")),h=y(()=>[e.contentClass,"q-editor__content",{col:S.value,"overflow-auto":S.value||e.maxHeight}]),g=y(()=>e.disable===!0?{"aria-disabled":"true"}:e.readonly===!0?{"aria-readonly":"true"}:{});function B(){if(O.value!==null){const i=`inner${W.value===!0?"Text":"HTML"}`,r=O.value[i];r!==e.modelValue&&(Z=r,n("update:modelValue",r))}}function Y(i){if(n("keydown",i),i.ctrlKey!==!0||wt(i)===!0){U();return}const r=i.keyCode,D=ee.value[r];if(D!==void 0){const{cmd:T,param:E}=D;bt(i),se(T,E,!1)}}function G(i){U(),n("click",i)}function J(i){if(O.value!==null){const{scrollTop:r,scrollHeight:D}=O.value;K=D-r}$.caret.save(),n("blur",i)}function oe(i){Ae(()=>{O.value!==null&&K!==void 0&&(O.value.scrollTop=O.value.scrollHeight-K)}),n("focus",i)}function ue(i){const r=N.value;if(r!==null&&r.contains(i.target)===!0&&(i.relatedTarget===null||r.contains(i.relatedTarget)!==!0)){const D=`inner${W.value===!0?"Text":"HTML"}`;$.caret.restorePosition(O.value[D].length),U()}}function ce(i){const r=N.value;r!==null&&r.contains(i.target)===!0&&(i.relatedTarget===null||r.contains(i.relatedTarget)!==!0)&&($.caret.savePosition(),U())}function ne(){K=void 0}function fe(i){$.caret.save()}function F(i,r){if(O.value!==null){r===!0&&$.caret.savePosition();const D=`inner${W.value===!0?"Text":"HTML"}`;O.value[D]=i,r===!0&&($.caret.restorePosition(O.value[D].length),U())}}function se(i,r,D=!0){ae(),$.caret.restore(),$.caret.apply(i,r,()=>{ae(),$.caret.save(),D&&U()})}function U(){setTimeout(()=>{L.value=null,u.$forceUpdate()},1)}function ae(){oa(()=>{O.value!==null&&O.value.focus({preventScroll:!0})})}function Se(){return O.value}return Ct(()=>{$.caret=u.caret=new Aa(O.value,$),F(e.modelValue),U(),document.addEventListener("selectionchange",fe)}),Ie(()=>{document.removeEventListener("selectionchange",fe)}),Object.assign(u,{runCmd:se,refreshToolbar:U,focus:ae,getContentEl:Se}),()=>{let i;if(re.value){const r=[d("div",{key:"qedt_top",class:"q-editor__toolbar row no-wrap scroll-x"+_.value},Ya($))];L.value!==null&&r.push(d("div",{key:"qedt_btm",class:"q-editor__toolbar row no-wrap items-center scroll-x"+_.value},Qa($))),i=d("div",{key:"toolbar_ctainer",class:"q-editor__toolbars-container"},r)}return d("div",{ref:N,class:b.value,style:{height:S.value===!0?"100%":null},...g.value,onFocusin:ue,onFocusout:ce},[i,d("div",{ref:O,style:te.value,class:h.value,contenteditable:R.value,placeholder:e.placeholder,...x.listeners.value,onInput:B,onKeydown:Y,onClick:G,onBlur:J,onFocus:oe,onMousedown:ne,onTouchstartPassive:ne})])}}});const Ga={class:"row q-pa-xs"},Xa={class:"col-12"},Za={class:"column items-center"},eo={class:"row justify-end"},to={class:"col-12"},ao={key:0,class:"no-tasks text-center",style:{height:"100%"}},oo={autocorrect:"off",autocapitalize:"off",autocomplete:"off",spellcheck:"false"},no={class:"row justify-end q-pa-md q-gutter-x-sm"},lo={class:"text-h5"},io=V("div",{class:"text-h6 text-center"},"\u8BBE \u7F6E",-1),ro={class:"q-gutter-sm q-pa-sm"},so=V("div",{class:"text-subtitle2"},"\u4E8B\u4EF6\u8303\u56F4\uFF1A",-1),uo=V("div",{class:"text-subtitle2"},"\u6700\u8FD1\uFF1A",-1),co=V("div",{class:"text-subtitle2"},"\u6708",-1),vo=V("div",{class:"text-subtitle2"},"\u65E5\u5386\u989C\u8272\uFF1A",-1),fo=V("div",{class:"text-subtitle2"},null,-1),mo=V("div",{class:"text-subtitle2"},null,-1),ho=V("div",{class:"text-subtitle2"},"\u4E8B\u4EF6\u989C\u8272\uFF1A",-1),go=V("div",{class:"text-subtitle2"},null,-1),yo=V("div",{class:"text-subtitle2"},null,-1),po={class:"row q-gutter-xs justify-end q-pa-sm"},Po={__name:"LoggerPage",setup(e){const a=pa(),n=P(!1),s=P(a.todayDate),u=P([]),k=P([]),f=P(""),w=P(""),S=P(),M=P(!1),x=P(!0),N=P(!1),O=P([]),L=P(!1),W=[1,3,6,0],R=P(null),z=P(null),K=P(!1),Z=[{label:"\u84DD\u8272",value:"primary"},{label:"\u6A59\u8272",value:"orange"},{label:"\u7EFF\u8272",value:"green"},{label:"\u9752\u8272",value:"teal"},{label:"\u68D5\u8272",value:"brown"},{label:"\u7D2B\u8272",value:"purple"}],_=na({_id:"",date:"",user:"",logger:""});le(()=>s.value,b=>{for(const h of k.value)if(b===h){N.value=!0;break}else N.value=!1});const p=async()=>{var b,h;if(await((b=R.value)==null?void 0:b.validate())&&await((h=z.value)==null?void 0:h.validate())){const g={user:a.user.email,monthRange:S.value,themeColor:f.value,eventColor:w.value};await a.axios.post("/user/loggersetting",g).then(B=>{q(),a.successTip(B.data.msg),K.value=!1}).catch(B=>{a.failureTip(B.response.data.msg)})}},q=async()=>{await a.axios.get("/query/logger",{params:{user:a.user.email,month:S.value}}).then(b=>{u.value=b.data,O.value=u.value.map(h=>h.logger),k.value=u.value.map(h=>h.date)}).catch(b=>{a.failureTip(b.response.data.msg)})},ie=b=>{const h=u.value[b].logger,g=O.value[b];h!==g?M.value=!0:M.value=!1},$=b=>{u.value[b].logger=O.value[b],M.value=!1},re=async()=>{_.logger.length>0&&(_.date=s.value,_.user=a.user.email,await a.axios.post("/query/addlogger",_).then(b=>{b.data.id&&(_._id=b.data.id),b.data.logger?_.logger=b.data.logger+"<ul><li>"+_.logger+"</li></ul>":_.logger="<ul><li>"+_.logger+"</li></ul>",u.value.unshift(JSON.parse(JSON.stringify(_))),O.value=u.value.map(h=>h.logger),k.value=u.value.map(h=>h.date),a.successTip(b.data.msg),N.value=!0}).catch(b=>{a.failureTip(b.response.data)}).finally(()=>{_.logger=""}))},ee=async(b,h,g,B)=>{h==="<br><ul><li>"||h==="<div><br></div>"||h.length===0?te(b,B):(_._id=b,_.date=g,_.user=a.user.email,_.logger=h,await a.axios.post("/query/editlogger",_).then(Y=>{u.value[B].logger=h,O.value=u.value.map(G=>G.logger),a.successTip(Y.data.msg)}).catch(Y=>{a.failureTip(Y.response.data.msg)}).finally(()=>{_.date="",_.logger="",_._id="",M.value=!1,x.value=!0}))},te=(b,h)=>{a.$q.dialog({title:"\u786E\u5B9A",message:"\u786E\u5B9A\u8981\u5220\u9664\u8BB0\u5F55?",cancel:!0,persistent:!0,ok:{push:!0,label:"\u786E\u5B9A",color:"green"},cancel:{push:!0,color:"blue-grey",label:"\u53D6\u6D88"}}).onOk(async()=>{await a.axios.delete("/query/deletelogger",{params:{id:b,user:a.user.email}}).then(g=>{u.value.splice(h,1),O.value=u.value.map(B=>B.logger),k.value=u.value.map(B=>B.date),a.successTip(g.data.msg),M.value=!1,N.value=!1}).catch(g=>{a.failureTip(g.response.data.msg)})}).onCancel(()=>{})};return Ct(async()=>{if(localStorage.getItem("token")!==null)try{await a.verifyUser().then(()=>{S.value=a.user.loggerSetting.monthRange,f.value=a.user.loggerSetting.themeColor,w.value=a.user.loggerSetting.eventColor,q()}).catch(()=>{router.push("/index")})}catch{router.push("/index")}else router.push("/index");N.value=!0}),(b,h)=>(be(),De(La,{class:"q-pa-xs column"},{default:A(()=>[V("div",Ga,[V("div",Xa,[V("div",Za,[I(Fa,{modelValue:s.value,"onUpdate:modelValue":h[1]||(h[1]=g=>s.value=g),class:"item-center",landscape:la(a).$q.screen.gt.md,events:k.value,"years-in-month-view":"",color:f.value,"event-color":w.value,"today-btn":"",style:{width:"100%","max-width":"550px"}},{default:A(()=>[V("div",eo,[I(Q,{label:"\u8BBE\u7F6E",flat:"",onClick:h[0]||(h[0]=g=>K.value=!0)})])]),_:1},8,["modelValue","landscape","events","color","event-color"])])]),V("div",to,[I(ia,{modelValue:_.logger,"onUpdate:modelValue":h[2]||(h[2]=g=>_.logger=g),outlined:"",type:"textarea",autogrow:"",class:"q-py-md",placeholder:"\u8BB0\u5F55\u70B9\u4E8B\u60C5\u5427...",onFocus:h[3]||(h[3]=g=>n.value=!0),onBlur:h[4]||(h[4]=g=>n.value=!1)},{prepend:A(()=>[I(Ve,{name:n.value?"tips_and_updates":"lightbulb",color:n.value?"orange":"grey"},null,8,["name","color"])]),append:A(()=>[I(Q,{round:"",dense:"",flat:"",icon:"send",color:"primary",onClick:re})]),_:1},8,["modelValue"]),N.value?$e("",!0):(be(),st("div",ao,[I(Ve,{name:"psychology_alt",size:"150px",color:"primary"})])),I(za,{modelValue:s.value,"onUpdate:modelValue":h[6]||(h[6]=g=>s.value=g),animated:"","transition-prev":"jump-up","transition-next":"jump-up"},{default:A(()=>[(be(!0),st(sa,null,ra(u.value,(g,B)=>(be(),De(Ma,{key:g._id,item:g,index:B,name:g.date,class:"q-pa-none"},{default:A(()=>[V("form",oo,[V("div",no,[V("div",lo,va(g.date),1),I(ba),M.value?(be(),De(Q,{key:0,label:"\u4FEE \u6539",class:"q-px-md",color:"primary",disable:L.value,onClick:Y=>ee(g._id,g.logger,g.date,B)},null,8,["disable","onClick"])):$e("",!0),M.value?(be(),De(Q,{key:1,label:"\u53D6 \u6D88",class:"q-px-md",color:"grey",onClick:Y=>$(B)},null,8,["onClick"])):$e("",!0)]),I(Ja,{modelValue:g.logger,"onUpdate:modelValue":Y=>g.logger=Y,dense:b.$q.screen.lt.md,readonly:x.value,toolbar:[["fullscreen"],[{label:"\u529F\u80FD",size:"lg",icon:"filter_2",fixedLabel:!0,list:"only-icons",options:["left","center","right","justify","bold","italic","strike","quote","underline","unordered","ordered","outdent","indent","print","hr","link","undo","redo"]}],[{label:"\u5B57\u4F53\u5927\u5C0F",icon:b.$q.iconSet.editor.fontSize,fixedLabel:!0,size:"md",fixedIcon:!0,list:"no-icons",options:["size-1","size-2","size-3","size-4","size-5","size-6","size-7"]},"removeFormat"],["viewsource"],["edit"]],fonts:{arial:"Arial",arial_black:"Arial Black",comic_sans:"Comic Sans MS",courier_new:"Courier New",impact:"Impact",lucida_grande:"Lucida Grande",times_new_roman:"Times New Roman",verdana:"Verdana"},onInput:Y=>ie(B)},{edit:A(()=>[I(Q,{icon:"edit",color:"primary",size:"sm",flat:"",padding:"none",onClick:h[5]||(h[5]=Y=>x.value=!1)})]),_:2},1032,["modelValue","onUpdate:modelValue","dense","readonly","toolbar","onInput"])])]),_:2},1032,["item","index","name"]))),128))]),_:1},8,["modelValue"])])]),I(da,{modelValue:K.value,"onUpdate:modelValue":h[10]||(h[10]=g=>K.value=g),persistent:""},{default:A(()=>[I(ua,{style:{"min-width":"400px","min-height":"350px"}},{default:A(()=>[I(Be,null,{default:A(()=>[io]),_:1}),I(Be,null,{default:A(()=>[V("div",ro,[I(Ee,{modelValue:S.value,"onUpdate:modelValue":h[7]||(h[7]=g=>S.value=g),outlined:"",dense:"",options:W,"transition-show":"jump-up","transition-hide":"jump-up",hint:"0\u4EE3\u8868\u5168\u90E8","hide-hint":"","hide-bottom-space":""},{before:A(()=>[so]),prepend:A(()=>[uo]),append:A(()=>[co]),_:1},8,["modelValue"]),I(Ee,{ref_key:"themeColoRef",ref:R,modelValue:f.value,"onUpdate:modelValue":h[8]||(h[8]=g=>f.value=g),outlined:"",dense:"",options:Z,"hide-bottom-space":"","emit-value":"","map-options":"","option-label":"label","option-value":"value","transition-show":"jump-up","transition-hide":"jump-up",rules:[g=>!!g||"\u8BF7\u9009\u62E9\u989C\u8272"]},{before:A(()=>[vo]),prepend:A(()=>[fo]),append:A(()=>[mo]),_:1},8,["modelValue","rules"]),I(Ee,{ref_key:"eventColoRef",ref:z,modelValue:w.value,"onUpdate:modelValue":h[9]||(h[9]=g=>w.value=g),outlined:"",dense:"","hide-bottom-space":"","emit-value":"","map-options":"",options:Z,"option-label":"label","option-value":"value","transition-show":"jump-up","transition-hide":"jump-up",rules:[g=>!!g||"\u8BF7\u9009\u62E9\u989C\u8272"]},{before:A(()=>[ho]),prepend:A(()=>[go]),append:A(()=>[yo]),_:1},8,["modelValue","rules"])])]),_:1}),I(Be,null,{default:A(()=>[V("div",po,[I(Q,{outline:"",label:"\u63D0 \u4EA4",color:"primary",onClick:p}),ca(I(Q,{outline:"",label:"\u53D6 \u6D88",color:"grey"},null,512),[[Ta]])])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}};export{Po as default};
