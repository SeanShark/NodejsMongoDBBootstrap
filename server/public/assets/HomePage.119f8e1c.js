import{_ as j,H as E,r as B,q as F,D as J,J as r,O as u,M as a,P as i,L as e,S as m,Q as G,ak as y,al as W,am as X,K as b,an as w,ao as M,ap as h,N as T,U as H,aq as Z,ar as ee,t as p,as as R,at as N,R as V,T as k,V as A,au as ae,av as te}from"./index.64fbb36d.js";import{Q as oe,a as K}from"./QTabs.ed2f2313.js";import{Q as _,a as s}from"./QItem.57c62657.js";import{Q as f,C as g}from"./ClosePopup.f356d75e.js";import{Q}from"./QList.7968b33f.js";import{Q as O}from"./QBtnDropdown.9d7fd7e3.js";import{Q as le,a as Y}from"./QTabPanels.41094a35.js";import{Q as se}from"./QPage.5de54236.js";import{u as ne,d as re}from"./store.c7c05c6b.js";import"./QResizeObserver.601325b0.js";import"./rtl.b51694b1.js";import"./use-panel.e739671b.js";import"./axios.7331a07d.js";const q=x=>(ae("data-v-768bb512"),x=x(),te(),x),de=q(()=>i("p",{class:"text-h6 text-center q-pa-md"},"\u5907\u5FD8\u5F55",-1)),ie={class:"column q-pa-sm q-ma-none"},ce={class:"col q-pa-sm"},ue={class:"q-gutter-sm row justify-center"},me={class:"q-gutter-y-md q-pa-sm"},pe={class:"text-italic"},_e={key:0,class:"no-tasks absolute-center"},fe=q(()=>i("div",{class:"text-h5 text-primary text-center"},"\u65E0\u4EFB\u52A1",-1)),ve={class:"text-italic"},ke={key:0,class:"no-tasks absolute-center"},ge=q(()=>i("div",{class:"text-h5 text-primary text-center"},"\u65E0\u4EFB\u52A1",-1)),ye={__name:"HomePage",setup(x){const D=E(),o=ne(),$=B(null);F(async()=>{if(localStorage.getItem("token")!==null)try{await o.verifyUser().then(()=>{o.getTodolists()}).catch(()=>{D.push("/index")})}catch{D.push("/index")}else D.push("/index")});const C=B("todo"),c=J({owner:"",todo:"",color:"text-black",createdAt:""}),U=async()=>{var n;await((n=$.value)==null?void 0:n.validate())&&(c.owner=o.user.email,c.createdAt=re.formatDate(Date.now(),"YYYY-MM-DD-HH:mm:ss"),o.createTodo(c).then(()=>{c.todo="",c.color="text-black",o.successTip(o.systemMsg)}).catch(()=>{o.failureTip(o.systemMsg)}))},z=(n,l,t)=>{setTimeout(()=>{o.editTodo(n,l,t).then(()=>{o.successTip(o.systemMsg),o.getTodolists()}).catch(()=>{o.failureTip(o.systemMsg)})},300)},I=[{label:"\u9ED1\u8272",value:"text-black",color:"black"},{label:"\u84DD\u8272",value:"text-primary",color:"primary"},{label:"\u7D2B\u8272",value:"text-accent",color:"accent"},{label:"\u7EA2\u8272",value:"text-negative",color:"negative"},{label:"\u7EFF\u8272",value:"text-positive",color:"positive"},{label:"\u9EC4\u8272",value:"text-warning",color:"warning"},{label:"\u975B\u84DD\u8272",value:"text-indigo",color:"indigo"}],P=n=>{o.$q.dialog({title:"\u786E\u5B9A",message:"\u786E\u5B9A\u8981\u5220\u9664\u8BB0\u5F55?",cancel:!0,persistent:!0,ok:{push:!0,label:"\u786E\u5B9A",color:"green"},cancel:{push:!0,color:"blue-grey",label:"\u53D6\u6D88"}}).onOk(async()=>{await o.deleteTodo(n).then(()=>{o.successTip(o.systemMsg)}).catch(l=>{o.failureTip(o.systemMsg)})}).onCancel(()=>{})},S=n=>{o.$q.dialog({title:"\u7F16\u8F91\u5185\u5BB9",message:"\u8BF7\u8F93\u5165\u9700\u8981\u7F16\u8F91\u7684\u5185\u5BB9",prompt:{model:`${n.todo}`,type:"text"},cancel:!0,persistent:!0,ok:{push:!0,label:"\u786E\u5B9A",color:"green"},cancel:{push:!0,color:"blue-grey",label:"\u53D6\u6D88"}}).onOk(l=>{if(l==="")return o.failureTip("\u5185\u5BB9\u4E0D\u80FD\u4E3A\u7A7A");o.editTodo("todo",n._id,l).then(()=>{o.successTip(o.systemMsg)}).catch(()=>{o.failureTip(o.systemMsg)})}).onCancel(()=>{})},L=n=>{o.$q.dialog({title:"\u9009\u62E9\u989C\u8272",message:"\u9009\u62E9\u4F60\u9700\u8981\u6539\u53D8\u7684\u989C\u8272",options:{type:"radio",model:`${n.color}`,inline:!0,items:I},cancel:!0,persistent:!0,ok:{push:!0,label:"\u786E\u5B9A",color:"green"},cancel:{push:!0,color:"blue-grey",label:"\u53D6\u6D88"}}).onOk(l=>{o.editTodo("color",n._id,l).then(()=>{o.successTip(o.systemMsg)}).catch(t=>{o.failureTip(o.systemMsg)})})};return(n,l)=>(r(),u(se,{class:"bg-grey-3"},{default:a(()=>[de,i("div",ie,[e(X,{ref_key:"inputRef",ref:$,modelValue:c.todo,"onUpdate:modelValue":l[0]||(l[0]=t=>c.todo=t),"bg-color":"white",class:"col q-pa-none","bottom-slots":"","hide-bottom-space":"",rules:[t=>!!t||"\u8BF7\u8F93\u5165\u5185\u5BB9"],outlined:"",placeholder:"\u8BF7\u8F93\u5165\u60A8\u7684\u5185\u5BB9","lazy-rules":"ondemand",onKeyup:W(U,["enter"])},{prepend:a(()=>[e(m,{name:"event"})]),append:a(()=>[e(G,{round:"",dense:"",flat:"",icon:"send",onClick:y(U,["stop"])},null,8,["onClick"])]),_:1},8,["modelValue","rules","onKeyup"]),i("div",ce,[i("div",ue,[(r(),b(M,null,w(I,(t,v)=>e(ee,{key:v,modelValue:c.color,"onUpdate:modelValue":d=>c.color=d,item:t,index:v,"keep-color":"",val:t.value,color:t.color,label:t.label},null,8,["modelValue","onUpdate:modelValue","item","index","val","color","label"])),64))])])]),i("div",me,[e(Z,null,{default:a(()=>[e(oe,{modelValue:C.value,"onUpdate:modelValue":l[1]||(l[1]=t=>C.value=t),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},{default:a(()=>[e(K,{name:"todo",label:"\u4EFB\u52A1"}),e(K,{name:"done",label:"\u5DF2\u5B8C\u6210"})]),_:1},8,["modelValue"]),e(h),e(le,{modelValue:C.value,"onUpdate:modelValue":l[4]||(l[4]=t=>C.value=t),animated:""},{default:a(()=>[e(Y,{name:"todo",style:{"min-height":"150px"}},{default:a(()=>[e(Q,{separator:"",bordered:""},{default:a(()=>[(r(!0),b(M,null,w(T(o).doingLists,(t,v)=>p((r(),u(_,{key:t._id,item:t,index:v,clickable:""},{default:a(()=>[e(s,{avatar:""},{default:a(()=>[e(R,{modelValue:t.isDone,"onUpdate:modelValue":d=>t.isDone=d,name:"isDone",color:"primary",onClick:y(d=>z("isDone",t._id,t.isDone),["stop"])},null,8,["modelValue","onUpdate:modelValue","onClick"])]),_:2},1024),e(s,null,{default:a(()=>[e(f,null,{default:a(()=>[i("div",{class:N([t.color,"text-body2"])},V(t.todo),3),i("div",pe,V(t.createdAt),1)]),_:2},1024)]),_:2},1024),e(O,{color:"primary",padding:"xs xs",class:"glossy",onClick:l[2]||(l[2]=y(()=>{},["stop"]))},{default:a(()=>[e(Q,null,{default:a(()=>[p((r(),u(_,{clickable:"",onClick:d=>S(t)},{default:a(()=>[e(s,{avatar:""},{default:a(()=>[e(m,{name:"edit_note",color:"primary",size:"sm"})]),_:1}),e(s,null,{default:a(()=>[e(f,null,{default:a(()=>[k("\u7F16\u8F91")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[g]]),e(h),p((r(),u(_,{clickable:"",onClick:d=>P(t._id)},{default:a(()=>[e(s,{avatar:""},{default:a(()=>[e(m,{name:"delete",color:"red",size:"sm"})]),_:1}),e(s,null,{default:a(()=>[e(f,null,{default:a(()=>[k("\u5220\u9664")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[g]]),e(h),p((r(),u(_,{clickable:"",onClick:d=>L(t)},{default:a(()=>[e(s,{avatar:""},{default:a(()=>[e(m,{name:"color_lens",color:"teal",size:"sm"})]),_:1}),e(s,null,{default:a(()=>[e(f,null,{default:a(()=>[k("\u989C\u8272")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[g]])]),_:2},1024)]),_:2},1024)]),_:2},1032,["item","index"])),[[A]])),128))]),_:1}),T(o).doingLists.length?H("",!0):(r(),b("div",_e,[e(m,{name:"check",size:"50px",color:"primary"}),fe]))]),_:1}),e(Y,{name:"done",style:{"min-height":"150px"}},{default:a(()=>[e(Q,{separator:"",bordered:""},{default:a(()=>[(r(!0),b(M,null,w(T(o).doneLists,(t,v)=>p((r(),u(_,{key:t._id,item:t,index:v,clickable:""},{default:a(()=>[e(s,{avatar:""},{default:a(()=>[e(R,{modelValue:t.isDone,"onUpdate:modelValue":d=>t.isDone=d,color:"primary",onClick:y(d=>z("isDone",t._id,t.isDone),["stop"])},null,8,["modelValue","onUpdate:modelValue","onClick"])]),_:2},1024),e(s,null,{default:a(()=>[e(f,null,{default:a(()=>[i("div",{class:N(t.color)},V(t.todo),3)]),_:2},1024),i("div",ve,V(t.createdAt),1)]),_:2},1024),e(O,{color:"primary",padding:"xs xs",class:"glossy",onClick:l[3]||(l[3]=y(()=>{},["stop"]))},{default:a(()=>[e(Q,null,{default:a(()=>[p((r(),u(_,{lickable:"",onClick:d=>S(t)},{default:a(()=>[e(s,{avatar:""},{default:a(()=>[e(m,{name:"edit_note",color:"primary",size:"sm"})]),_:1}),e(s,null,{default:a(()=>[e(f,null,{default:a(()=>[k("\u7F16\u8F91")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[g]]),e(h),p((r(),u(_,{clickable:"",onClick:d=>P(t._id)},{default:a(()=>[e(s,{avatar:""},{default:a(()=>[e(m,{name:"delete",color:"red",size:"sm"})]),_:1}),e(s,null,{default:a(()=>[e(f,null,{default:a(()=>[k("\u5220\u9664")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[g]]),e(h),p((r(),u(_,{clickable:"",onClick:d=>L(t)},{default:a(()=>[e(s,{avatar:""},{default:a(()=>[e(m,{name:"color_lens",color:"teal",size:"sm"})]),_:1}),e(s,null,{default:a(()=>[e(f,null,{default:a(()=>[k("\u989C\u8272")]),_:1})]),_:1})]),_:2},1032,["onClick"])),[[g]])]),_:2},1024)]),_:2},1024)]),_:2},1032,["item","index"])),[[A]])),128))]),_:1}),T(o).doneLists.length?H("",!0):(r(),b("div",ke,[e(m,{name:"check",size:"50px",color:"primary"}),ge]))]),_:1})]),_:1},8,["modelValue"])]),_:1})])]),_:1}))}};var ze=j(ye,[["__scopeId","data-v-768bb512"]]);export{ze as default};
